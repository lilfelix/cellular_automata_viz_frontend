(()=>{var e={157:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&s(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.StateServiceClient=void 0;var n=o(r(282)),a=o(r(617)),p=function(){function e(e,t,r){this.methodDescriptorInitWorldState=new n.MethodDescriptor("/sim_server.StateService/InitWorldState",n.MethodType.UNARY,a.InitializeRequest,a.WorldStateResponse,(function(e){return e.serializeBinary()}),a.WorldStateResponse.deserializeBinary),this.methodDescriptorStepWorldStateForward=new n.MethodDescriptor("/sim_server.StateService/StepWorldStateForward",n.MethodType.UNARY,a.StepRequest,a.WorldStateResponse,(function(e){return e.serializeBinary()}),a.WorldStateResponse.deserializeBinary),this.methodDescriptorStartSimulation=new n.MethodDescriptor("/sim_server.StateService/StartSimulation",n.MethodType.UNARY,a.StartSimulationRequest,a.SimulationResultResponse,(function(e){return e.serializeBinary()}),a.SimulationResultResponse.deserializeBinary),r||(r={}),t||(t={}),r.format="binary",this.client_=new n.GrpcWebClientBase(r),this.hostname_=e.replace(/\/+$/,""),this.credentials_=t,this.options_=r}return e.prototype.initWorldState=function(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/sim_server.StateService/InitWorldState",e,t||{},this.methodDescriptorInitWorldState,r):this.client_.unaryCall(this.hostname_+"/sim_server.StateService/InitWorldState",e,t||{},this.methodDescriptorInitWorldState)},e.prototype.stepWorldStateForward=function(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/sim_server.StateService/StepWorldStateForward",e,t||{},this.methodDescriptorStepWorldStateForward,r):this.client_.unaryCall(this.hostname_+"/sim_server.StateService/StepWorldStateForward",e,t||{},this.methodDescriptorStepWorldStateForward)},e.prototype.startSimulation=function(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/sim_server.StateService/StartSimulation",e,t||{},this.methodDescriptorStartSimulation,r):this.client_.unaryCall(this.hostname_+"/sim_server.StateService/StartSimulation",e,t||{},this.methodDescriptorStartSimulation)},e}();t.StateServiceClient=p},617:(e,t,r)=>{var s=r(459),i=s,o="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==o&&o||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();i.exportSymbol("proto.sim_server.GridDimensions",null,o),i.exportSymbol("proto.sim_server.InitializeRequest",null,o),i.exportSymbol("proto.sim_server.Metadata",null,o),i.exportSymbol("proto.sim_server.SimulationResultResponse",null,o),i.exportSymbol("proto.sim_server.StartSimulationRequest",null,o),i.exportSymbol("proto.sim_server.StepRequest",null,o),i.exportSymbol("proto.sim_server.Vector2D",null,o),i.exportSymbol("proto.sim_server.Vector3D",null,o),i.exportSymbol("proto.sim_server.WorldStateResponse",null,o),proto.sim_server.Metadata=function(e){s.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.sim_server.Metadata,s.Message),i.DEBUG&&!COMPILED&&(proto.sim_server.Metadata.displayName="proto.sim_server.Metadata"),proto.sim_server.Vector3D=function(e){s.Message.initialize(this,e,0,-1,proto.sim_server.Vector3D.repeatedFields_,null)},i.inherits(proto.sim_server.Vector3D,s.Message),i.DEBUG&&!COMPILED&&(proto.sim_server.Vector3D.displayName="proto.sim_server.Vector3D"),proto.sim_server.Vector2D=function(e){s.Message.initialize(this,e,0,-1,proto.sim_server.Vector2D.repeatedFields_,null)},i.inherits(proto.sim_server.Vector2D,s.Message),i.DEBUG&&!COMPILED&&(proto.sim_server.Vector2D.displayName="proto.sim_server.Vector2D"),proto.sim_server.GridDimensions=function(e){s.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.sim_server.GridDimensions,s.Message),i.DEBUG&&!COMPILED&&(proto.sim_server.GridDimensions.displayName="proto.sim_server.GridDimensions"),proto.sim_server.InitializeRequest=function(e){s.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.sim_server.InitializeRequest,s.Message),i.DEBUG&&!COMPILED&&(proto.sim_server.InitializeRequest.displayName="proto.sim_server.InitializeRequest"),proto.sim_server.StepRequest=function(e){s.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.sim_server.StepRequest,s.Message),i.DEBUG&&!COMPILED&&(proto.sim_server.StepRequest.displayName="proto.sim_server.StepRequest"),proto.sim_server.WorldStateResponse=function(e){s.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.sim_server.WorldStateResponse,s.Message),i.DEBUG&&!COMPILED&&(proto.sim_server.WorldStateResponse.displayName="proto.sim_server.WorldStateResponse"),proto.sim_server.StartSimulationRequest=function(e){s.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.sim_server.StartSimulationRequest,s.Message),i.DEBUG&&!COMPILED&&(proto.sim_server.StartSimulationRequest.displayName="proto.sim_server.StartSimulationRequest"),proto.sim_server.SimulationResultResponse=function(e){s.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.sim_server.SimulationResultResponse,s.Message),i.DEBUG&&!COMPILED&&(proto.sim_server.SimulationResultResponse.displayName="proto.sim_server.SimulationResultResponse"),s.Message.GENERATE_TO_OBJECT&&(proto.sim_server.Metadata.prototype.toObject=function(e){return proto.sim_server.Metadata.toObject(e,this)},proto.sim_server.Metadata.toObject=function(e,t){var r={stateId:s.Message.getFieldWithDefault(t,1,0),step:s.Message.getFieldWithDefault(t,2,0),status:s.Message.getFieldWithDefault(t,3,"")};return e&&(r.$jspbMessageInstance=t),r}),proto.sim_server.Metadata.deserializeBinary=function(e){var t=new s.BinaryReader(e),r=new proto.sim_server.Metadata;return proto.sim_server.Metadata.deserializeBinaryFromReader(r,t)},proto.sim_server.Metadata.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readInt64();e.setStateId(r);break;case 2:r=t.readInt64(),e.setStep(r);break;case 3:r=t.readString(),e.setStatus(r);break;default:t.skipField()}return e},proto.sim_server.Metadata.prototype.serializeBinary=function(){var e=new s.BinaryWriter;return proto.sim_server.Metadata.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.sim_server.Metadata.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getStateId())&&t.writeInt64(1,r),0!==(r=e.getStep())&&t.writeInt64(2,r),(r=e.getStatus()).length>0&&t.writeString(3,r)},proto.sim_server.Metadata.prototype.getStateId=function(){return s.Message.getFieldWithDefault(this,1,0)},proto.sim_server.Metadata.prototype.setStateId=function(e){return s.Message.setProto3IntField(this,1,e)},proto.sim_server.Metadata.prototype.getStep=function(){return s.Message.getFieldWithDefault(this,2,0)},proto.sim_server.Metadata.prototype.setStep=function(e){return s.Message.setProto3IntField(this,2,e)},proto.sim_server.Metadata.prototype.getStatus=function(){return s.Message.getFieldWithDefault(this,3,"")},proto.sim_server.Metadata.prototype.setStatus=function(e){return s.Message.setProto3StringField(this,3,e)},proto.sim_server.Vector3D.repeatedFields_=[1],s.Message.GENERATE_TO_OBJECT&&(proto.sim_server.Vector3D.prototype.toObject=function(e){return proto.sim_server.Vector3D.toObject(e,this)},proto.sim_server.Vector3D.toObject=function(e,t){var r={vec2dList:s.Message.toObjectList(t.getVec2dList(),proto.sim_server.Vector2D.toObject,e)};return e&&(r.$jspbMessageInstance=t),r}),proto.sim_server.Vector3D.deserializeBinary=function(e){var t=new s.BinaryReader(e),r=new proto.sim_server.Vector3D;return proto.sim_server.Vector3D.deserializeBinaryFromReader(r,t)},proto.sim_server.Vector3D.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new proto.sim_server.Vector2D;t.readMessage(r,proto.sim_server.Vector2D.deserializeBinaryFromReader),e.addVec2d(r);break;default:t.skipField()}return e},proto.sim_server.Vector3D.prototype.serializeBinary=function(){var e=new s.BinaryWriter;return proto.sim_server.Vector3D.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.sim_server.Vector3D.serializeBinaryToWriter=function(e,t){var r;(r=e.getVec2dList()).length>0&&t.writeRepeatedMessage(1,r,proto.sim_server.Vector2D.serializeBinaryToWriter)},proto.sim_server.Vector3D.prototype.getVec2dList=function(){return s.Message.getRepeatedWrapperField(this,proto.sim_server.Vector2D,1)},proto.sim_server.Vector3D.prototype.setVec2dList=function(e){return s.Message.setRepeatedWrapperField(this,1,e)},proto.sim_server.Vector3D.prototype.addVec2d=function(e,t){return s.Message.addToRepeatedWrapperField(this,1,e,proto.sim_server.Vector2D,t)},proto.sim_server.Vector3D.prototype.clearVec2dList=function(){return this.setVec2dList([])},proto.sim_server.Vector2D.repeatedFields_=[1],s.Message.GENERATE_TO_OBJECT&&(proto.sim_server.Vector2D.prototype.toObject=function(e){return proto.sim_server.Vector2D.toObject(e,this)},proto.sim_server.Vector2D.toObject=function(e,t){var r,i={vec1dList:null==(r=s.Message.getRepeatedField(t,1))?void 0:r};return e&&(i.$jspbMessageInstance=t),i}),proto.sim_server.Vector2D.deserializeBinary=function(e){var t=new s.BinaryReader(e),r=new proto.sim_server.Vector2D;return proto.sim_server.Vector2D.deserializeBinaryFromReader(r,t)},proto.sim_server.Vector2D.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:for(var r=t.isDelimited()?t.readPackedUint32():[t.readUint32()],s=0;s<r.length;s++)e.addVec1d(r[s]);break;default:t.skipField()}return e},proto.sim_server.Vector2D.prototype.serializeBinary=function(){var e=new s.BinaryWriter;return proto.sim_server.Vector2D.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.sim_server.Vector2D.serializeBinaryToWriter=function(e,t){var r;(r=e.getVec1dList()).length>0&&t.writePackedUint32(1,r)},proto.sim_server.Vector2D.prototype.getVec1dList=function(){return s.Message.getRepeatedField(this,1)},proto.sim_server.Vector2D.prototype.setVec1dList=function(e){return s.Message.setField(this,1,e||[])},proto.sim_server.Vector2D.prototype.addVec1d=function(e,t){return s.Message.addToRepeatedField(this,1,e,t)},proto.sim_server.Vector2D.prototype.clearVec1dList=function(){return this.setVec1dList([])},s.Message.GENERATE_TO_OBJECT&&(proto.sim_server.GridDimensions.prototype.toObject=function(e){return proto.sim_server.GridDimensions.toObject(e,this)},proto.sim_server.GridDimensions.toObject=function(e,t){var r={xMax:s.Message.getFieldWithDefault(t,1,0),yMax:s.Message.getFieldWithDefault(t,2,0),zMax:s.Message.getFieldWithDefault(t,3,0)};return e&&(r.$jspbMessageInstance=t),r}),proto.sim_server.GridDimensions.deserializeBinary=function(e){var t=new s.BinaryReader(e),r=new proto.sim_server.GridDimensions;return proto.sim_server.GridDimensions.deserializeBinaryFromReader(r,t)},proto.sim_server.GridDimensions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readInt64();e.setXMax(r);break;case 2:r=t.readInt64(),e.setYMax(r);break;case 3:r=t.readInt64(),e.setZMax(r);break;default:t.skipField()}return e},proto.sim_server.GridDimensions.prototype.serializeBinary=function(){var e=new s.BinaryWriter;return proto.sim_server.GridDimensions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.sim_server.GridDimensions.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getXMax())&&t.writeInt64(1,r),0!==(r=e.getYMax())&&t.writeInt64(2,r),0!==(r=e.getZMax())&&t.writeInt64(3,r)},proto.sim_server.GridDimensions.prototype.getXMax=function(){return s.Message.getFieldWithDefault(this,1,0)},proto.sim_server.GridDimensions.prototype.setXMax=function(e){return s.Message.setProto3IntField(this,1,e)},proto.sim_server.GridDimensions.prototype.getYMax=function(){return s.Message.getFieldWithDefault(this,2,0)},proto.sim_server.GridDimensions.prototype.setYMax=function(e){return s.Message.setProto3IntField(this,2,e)},proto.sim_server.GridDimensions.prototype.getZMax=function(){return s.Message.getFieldWithDefault(this,3,0)},proto.sim_server.GridDimensions.prototype.setZMax=function(e){return s.Message.setProto3IntField(this,3,e)},s.Message.GENERATE_TO_OBJECT&&(proto.sim_server.InitializeRequest.prototype.toObject=function(e){return proto.sim_server.InitializeRequest.toObject(e,this)},proto.sim_server.InitializeRequest.toObject=function(e,t){var r,s={dimensions:(r=t.getDimensions())&&proto.sim_server.GridDimensions.toObject(e,r)};return e&&(s.$jspbMessageInstance=t),s}),proto.sim_server.InitializeRequest.deserializeBinary=function(e){var t=new s.BinaryReader(e),r=new proto.sim_server.InitializeRequest;return proto.sim_server.InitializeRequest.deserializeBinaryFromReader(r,t)},proto.sim_server.InitializeRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new proto.sim_server.GridDimensions;t.readMessage(r,proto.sim_server.GridDimensions.deserializeBinaryFromReader),e.setDimensions(r);break;default:t.skipField()}return e},proto.sim_server.InitializeRequest.prototype.serializeBinary=function(){var e=new s.BinaryWriter;return proto.sim_server.InitializeRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.sim_server.InitializeRequest.serializeBinaryToWriter=function(e,t){var r;null!=(r=e.getDimensions())&&t.writeMessage(1,r,proto.sim_server.GridDimensions.serializeBinaryToWriter)},proto.sim_server.InitializeRequest.prototype.getDimensions=function(){return s.Message.getWrapperField(this,proto.sim_server.GridDimensions,1)},proto.sim_server.InitializeRequest.prototype.setDimensions=function(e){return s.Message.setWrapperField(this,1,e)},proto.sim_server.InitializeRequest.prototype.clearDimensions=function(){return this.setDimensions(void 0)},proto.sim_server.InitializeRequest.prototype.hasDimensions=function(){return null!=s.Message.getField(this,1)},s.Message.GENERATE_TO_OBJECT&&(proto.sim_server.StepRequest.prototype.toObject=function(e){return proto.sim_server.StepRequest.toObject(e,this)},proto.sim_server.StepRequest.toObject=function(e,t){var r={worldStateId:s.Message.getFieldWithDefault(t,1,0),rule:t.getRule_asB64(),numSteps:s.Message.getFieldWithDefault(t,3,0)};return e&&(r.$jspbMessageInstance=t),r}),proto.sim_server.StepRequest.deserializeBinary=function(e){var t=new s.BinaryReader(e),r=new proto.sim_server.StepRequest;return proto.sim_server.StepRequest.deserializeBinaryFromReader(r,t)},proto.sim_server.StepRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readInt64();e.setWorldStateId(r);break;case 2:r=t.readBytes(),e.setRule(r);break;case 3:r=t.readInt64(),e.setNumSteps(r);break;default:t.skipField()}return e},proto.sim_server.StepRequest.prototype.serializeBinary=function(){var e=new s.BinaryWriter;return proto.sim_server.StepRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.sim_server.StepRequest.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getWorldStateId())&&t.writeInt64(1,r),(r=e.getRule_asU8()).length>0&&t.writeBytes(2,r),null!=(r=s.Message.getField(e,3))&&t.writeInt64(3,r)},proto.sim_server.StepRequest.prototype.getWorldStateId=function(){return s.Message.getFieldWithDefault(this,1,0)},proto.sim_server.StepRequest.prototype.setWorldStateId=function(e){return s.Message.setProto3IntField(this,1,e)},proto.sim_server.StepRequest.prototype.getRule=function(){return s.Message.getFieldWithDefault(this,2,"")},proto.sim_server.StepRequest.prototype.getRule_asB64=function(){return s.Message.bytesAsB64(this.getRule())},proto.sim_server.StepRequest.prototype.getRule_asU8=function(){return s.Message.bytesAsU8(this.getRule())},proto.sim_server.StepRequest.prototype.setRule=function(e){return s.Message.setProto3BytesField(this,2,e)},proto.sim_server.StepRequest.prototype.getNumSteps=function(){return s.Message.getFieldWithDefault(this,3,0)},proto.sim_server.StepRequest.prototype.setNumSteps=function(e){return s.Message.setField(this,3,e)},proto.sim_server.StepRequest.prototype.clearNumSteps=function(){return s.Message.setField(this,3,void 0)},proto.sim_server.StepRequest.prototype.hasNumSteps=function(){return null!=s.Message.getField(this,3)},s.Message.GENERATE_TO_OBJECT&&(proto.sim_server.WorldStateResponse.prototype.toObject=function(e){return proto.sim_server.WorldStateResponse.toObject(e,this)},proto.sim_server.WorldStateResponse.toObject=function(e,t){var r,s={metadata:(r=t.getMetadata())&&proto.sim_server.Metadata.toObject(e,r),state:(r=t.getState())&&proto.sim_server.Vector3D.toObject(e,r)};return e&&(s.$jspbMessageInstance=t),s}),proto.sim_server.WorldStateResponse.deserializeBinary=function(e){var t=new s.BinaryReader(e),r=new proto.sim_server.WorldStateResponse;return proto.sim_server.WorldStateResponse.deserializeBinaryFromReader(r,t)},proto.sim_server.WorldStateResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new proto.sim_server.Metadata;t.readMessage(r,proto.sim_server.Metadata.deserializeBinaryFromReader),e.setMetadata(r);break;case 2:r=new proto.sim_server.Vector3D,t.readMessage(r,proto.sim_server.Vector3D.deserializeBinaryFromReader),e.setState(r);break;default:t.skipField()}return e},proto.sim_server.WorldStateResponse.prototype.serializeBinary=function(){var e=new s.BinaryWriter;return proto.sim_server.WorldStateResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.sim_server.WorldStateResponse.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getMetadata())&&t.writeMessage(1,r,proto.sim_server.Metadata.serializeBinaryToWriter),null!=(r=e.getState())&&t.writeMessage(2,r,proto.sim_server.Vector3D.serializeBinaryToWriter)},proto.sim_server.WorldStateResponse.prototype.getMetadata=function(){return s.Message.getWrapperField(this,proto.sim_server.Metadata,1)},proto.sim_server.WorldStateResponse.prototype.setMetadata=function(e){return s.Message.setWrapperField(this,1,e)},proto.sim_server.WorldStateResponse.prototype.clearMetadata=function(){return this.setMetadata(void 0)},proto.sim_server.WorldStateResponse.prototype.hasMetadata=function(){return null!=s.Message.getField(this,1)},proto.sim_server.WorldStateResponse.prototype.getState=function(){return s.Message.getWrapperField(this,proto.sim_server.Vector3D,2)},proto.sim_server.WorldStateResponse.prototype.setState=function(e){return s.Message.setWrapperField(this,2,e)},proto.sim_server.WorldStateResponse.prototype.clearState=function(){return this.setState(void 0)},proto.sim_server.WorldStateResponse.prototype.hasState=function(){return null!=s.Message.getField(this,2)},s.Message.GENERATE_TO_OBJECT&&(proto.sim_server.StartSimulationRequest.prototype.toObject=function(e){return proto.sim_server.StartSimulationRequest.toObject(e,this)},proto.sim_server.StartSimulationRequest.toObject=function(e,t){var r,i={initReq:(r=t.getInitReq())&&proto.sim_server.InitializeRequest.toObject(e,r),stepReq:(r=t.getStepReq())&&proto.sim_server.StepRequest.toObject(e,r),timeout:s.Message.getFieldWithDefault(t,3,0)};return e&&(i.$jspbMessageInstance=t),i}),proto.sim_server.StartSimulationRequest.deserializeBinary=function(e){var t=new s.BinaryReader(e),r=new proto.sim_server.StartSimulationRequest;return proto.sim_server.StartSimulationRequest.deserializeBinaryFromReader(r,t)},proto.sim_server.StartSimulationRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new proto.sim_server.InitializeRequest;t.readMessage(r,proto.sim_server.InitializeRequest.deserializeBinaryFromReader),e.setInitReq(r);break;case 2:r=new proto.sim_server.StepRequest,t.readMessage(r,proto.sim_server.StepRequest.deserializeBinaryFromReader),e.setStepReq(r);break;case 3:r=t.readInt64(),e.setTimeout(r);break;default:t.skipField()}return e},proto.sim_server.StartSimulationRequest.prototype.serializeBinary=function(){var e=new s.BinaryWriter;return proto.sim_server.StartSimulationRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.sim_server.StartSimulationRequest.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getInitReq())&&t.writeMessage(1,r,proto.sim_server.InitializeRequest.serializeBinaryToWriter),null!=(r=e.getStepReq())&&t.writeMessage(2,r,proto.sim_server.StepRequest.serializeBinaryToWriter),null!=(r=s.Message.getField(e,3))&&t.writeInt64(3,r)},proto.sim_server.StartSimulationRequest.prototype.getInitReq=function(){return s.Message.getWrapperField(this,proto.sim_server.InitializeRequest,1)},proto.sim_server.StartSimulationRequest.prototype.setInitReq=function(e){return s.Message.setWrapperField(this,1,e)},proto.sim_server.StartSimulationRequest.prototype.clearInitReq=function(){return this.setInitReq(void 0)},proto.sim_server.StartSimulationRequest.prototype.hasInitReq=function(){return null!=s.Message.getField(this,1)},proto.sim_server.StartSimulationRequest.prototype.getStepReq=function(){return s.Message.getWrapperField(this,proto.sim_server.StepRequest,2)},proto.sim_server.StartSimulationRequest.prototype.setStepReq=function(e){return s.Message.setWrapperField(this,2,e)},proto.sim_server.StartSimulationRequest.prototype.clearStepReq=function(){return this.setStepReq(void 0)},proto.sim_server.StartSimulationRequest.prototype.hasStepReq=function(){return null!=s.Message.getField(this,2)},proto.sim_server.StartSimulationRequest.prototype.getTimeout=function(){return s.Message.getFieldWithDefault(this,3,0)},proto.sim_server.StartSimulationRequest.prototype.setTimeout=function(e){return s.Message.setField(this,3,e)},proto.sim_server.StartSimulationRequest.prototype.clearTimeout=function(){return s.Message.setField(this,3,void 0)},proto.sim_server.StartSimulationRequest.prototype.hasTimeout=function(){return null!=s.Message.getField(this,3)},s.Message.GENERATE_TO_OBJECT&&(proto.sim_server.SimulationResultResponse.prototype.toObject=function(e){return proto.sim_server.SimulationResultResponse.toObject(e,this)},proto.sim_server.SimulationResultResponse.toObject=function(e,t){var r,i={startState:(r=t.getStartState())&&proto.sim_server.WorldStateResponse.toObject(e,r),endState:(r=t.getEndState())&&proto.sim_server.WorldStateResponse.toObject(e,r),stateChangedDuringSim:s.Message.getBooleanFieldWithDefault(t,3,!1)};return e&&(i.$jspbMessageInstance=t),i}),proto.sim_server.SimulationResultResponse.deserializeBinary=function(e){var t=new s.BinaryReader(e),r=new proto.sim_server.SimulationResultResponse;return proto.sim_server.SimulationResultResponse.deserializeBinaryFromReader(r,t)},proto.sim_server.SimulationResultResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new proto.sim_server.WorldStateResponse;t.readMessage(r,proto.sim_server.WorldStateResponse.deserializeBinaryFromReader),e.setStartState(r);break;case 2:r=new proto.sim_server.WorldStateResponse,t.readMessage(r,proto.sim_server.WorldStateResponse.deserializeBinaryFromReader),e.setEndState(r);break;case 3:r=t.readBool(),e.setStateChangedDuringSim(r);break;default:t.skipField()}return e},proto.sim_server.SimulationResultResponse.prototype.serializeBinary=function(){var e=new s.BinaryWriter;return proto.sim_server.SimulationResultResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.sim_server.SimulationResultResponse.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getStartState())&&t.writeMessage(1,r,proto.sim_server.WorldStateResponse.serializeBinaryToWriter),null!=(r=e.getEndState())&&t.writeMessage(2,r,proto.sim_server.WorldStateResponse.serializeBinaryToWriter),(r=e.getStateChangedDuringSim())&&t.writeBool(3,r)},proto.sim_server.SimulationResultResponse.prototype.getStartState=function(){return s.Message.getWrapperField(this,proto.sim_server.WorldStateResponse,1)},proto.sim_server.SimulationResultResponse.prototype.setStartState=function(e){return s.Message.setWrapperField(this,1,e)},proto.sim_server.SimulationResultResponse.prototype.clearStartState=function(){return this.setStartState(void 0)},proto.sim_server.SimulationResultResponse.prototype.hasStartState=function(){return null!=s.Message.getField(this,1)},proto.sim_server.SimulationResultResponse.prototype.getEndState=function(){return s.Message.getWrapperField(this,proto.sim_server.WorldStateResponse,2)},proto.sim_server.SimulationResultResponse.prototype.setEndState=function(e){return s.Message.setWrapperField(this,2,e)},proto.sim_server.SimulationResultResponse.prototype.clearEndState=function(){return this.setEndState(void 0)},proto.sim_server.SimulationResultResponse.prototype.hasEndState=function(){return null!=s.Message.getField(this,2)},proto.sim_server.SimulationResultResponse.prototype.getStateChangedDuringSim=function(){return s.Message.getBooleanFieldWithDefault(this,3,!1)},proto.sim_server.SimulationResultResponse.prototype.setStateChangedDuringSim=function(e){return s.Message.setProto3BooleanField(this,3,e)},i.object.extend(t,proto.sim_server)},459:e=>{"use strict";e.exports=require("google-protobuf")},282:e=>{"use strict";e.exports=require("grpc-web")}},t={};function r(s){var i=t[s];if(void 0!==i)return i.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,r),o.exports}(()=>{"use strict";var e=r(157),t=r(617),s=new e.StateServiceClient("http://localhost:50051",null,null),i=new t.StartSimulationRequest,o=new t.InitializeRequest,n=new t.GridDimensions;n.setXMax(10),n.setYMax(10),n.setZMax(10),o.setDimensions(n);var a=new t.StepRequest;a.setNumSteps(1e3),a.setRule("ASNFZ4mrze8BI0VniavN7w=="),i.setTimeout(5),i.setInitReq(o),i.setStepReq(a),s.startSimulation(i).then((function(e){console.log("Received response: "+e.getStateChangedDuringSim())})).catch((function(e){console.log("Received error: "+e.code+", "+e.message)}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zb2NpYWwtZmFicmljLy4uL2NlbGxfYXV0b21hdGFfcHJvamVjdC9wcm90by9nZW5lcmF0ZWQvU2ltX3NlcnZlclNlcnZpY2VDbGllbnRQYi50cyIsIndlYnBhY2s6Ly9zb2NpYWwtZmFicmljLy4uL2NlbGxfYXV0b21hdGFfcHJvamVjdC9wcm90by9nZW5lcmF0ZWQvc2ltX3NlcnZlcl9wYi5qcyIsIndlYnBhY2s6Ly9zb2NpYWwtZmFicmljL2V4dGVybmFsIFwiZ29vZ2xlLXByb3RvYnVmXCIiLCJ3ZWJwYWNrOi8vc29jaWFsLWZhYnJpYy9leHRlcm5hbCBcImdycGMtd2ViXCIiLCJ3ZWJwYWNrOi8vc29jaWFsLWZhYnJpYy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9zb2NpYWwtZmFicmljLy4vc3JjL2NsaWVudC50cyJdLCJuYW1lcyI6WyJob3N0bmFtZSIsImNyZWRlbnRpYWxzIiwib3B0aW9ucyIsIm1ldGhvZERlc2NyaXB0b3JJbml0V29ybGRTdGF0ZSIsImdycGNXZWIiLCJNZXRob2REZXNjcmlwdG9yIiwiTWV0aG9kVHlwZSIsIlVOQVJZIiwic2ltX3NlcnZlcl9wYiIsIkluaXRpYWxpemVSZXF1ZXN0IiwiV29ybGRTdGF0ZVJlc3BvbnNlIiwicmVxdWVzdCIsInNlcmlhbGl6ZUJpbmFyeSIsImRlc2VyaWFsaXplQmluYXJ5IiwibWV0aG9kRGVzY3JpcHRvclN0ZXBXb3JsZFN0YXRlRm9yd2FyZCIsIlN0ZXBSZXF1ZXN0IiwibWV0aG9kRGVzY3JpcHRvclN0YXJ0U2ltdWxhdGlvbiIsIlN0YXJ0U2ltdWxhdGlvblJlcXVlc3QiLCJTaW11bGF0aW9uUmVzdWx0UmVzcG9uc2UiLCJ0aGlzIiwiY2xpZW50XyIsIkdycGNXZWJDbGllbnRCYXNlIiwiaG9zdG5hbWVfIiwicmVwbGFjZSIsImNyZWRlbnRpYWxzXyIsIm9wdGlvbnNfIiwiaW5pdFdvcmxkU3RhdGUiLCJtZXRhZGF0YSIsImNhbGxiYWNrIiwidW5kZWZpbmVkIiwicnBjQ2FsbCIsInVuYXJ5Q2FsbCIsInN0ZXBXb3JsZFN0YXRlRm9yd2FyZCIsInN0YXJ0U2ltdWxhdGlvbiIsIlN0YXRlU2VydmljZUNsaWVudCIsImpzcGIiLCJnb29nIiwiZ2xvYmFsIiwiZ2xvYmFsVGhpcyIsIndpbmRvdyIsInNlbGYiLCJjYWxsIiwiRnVuY3Rpb24iLCJleHBvcnRTeW1ib2wiLCJwcm90byIsInNpbV9zZXJ2ZXIiLCJNZXRhZGF0YSIsIm9wdF9kYXRhIiwiTWVzc2FnZSIsImluaXRpYWxpemUiLCJpbmhlcml0cyIsIkRFQlVHIiwiQ09NUElMRUQiLCJkaXNwbGF5TmFtZSIsIlZlY3RvcjNEIiwicmVwZWF0ZWRGaWVsZHNfIiwiVmVjdG9yMkQiLCJHcmlkRGltZW5zaW9ucyIsIkdFTkVSQVRFX1RPX09CSkVDVCIsInByb3RvdHlwZSIsInRvT2JqZWN0Iiwib3B0X2luY2x1ZGVJbnN0YW5jZSIsImluY2x1ZGVJbnN0YW5jZSIsIm1zZyIsIm9iaiIsInN0YXRlSWQiLCJnZXRGaWVsZFdpdGhEZWZhdWx0Iiwic3RlcCIsInN0YXR1cyIsIiRqc3BiTWVzc2FnZUluc3RhbmNlIiwiYnl0ZXMiLCJyZWFkZXIiLCJCaW5hcnlSZWFkZXIiLCJkZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIiLCJuZXh0RmllbGQiLCJpc0VuZEdyb3VwIiwiZ2V0RmllbGROdW1iZXIiLCJ2YWx1ZSIsInJlYWRJbnQ2NCIsInNldFN0YXRlSWQiLCJzZXRTdGVwIiwicmVhZFN0cmluZyIsInNldFN0YXR1cyIsInNraXBGaWVsZCIsIndyaXRlciIsIkJpbmFyeVdyaXRlciIsInNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyIiwiZ2V0UmVzdWx0QnVmZmVyIiwibWVzc2FnZSIsImYiLCJnZXRTdGF0ZUlkIiwid3JpdGVJbnQ2NCIsImdldFN0ZXAiLCJnZXRTdGF0dXMiLCJsZW5ndGgiLCJ3cml0ZVN0cmluZyIsInNldFByb3RvM0ludEZpZWxkIiwic2V0UHJvdG8zU3RyaW5nRmllbGQiLCJ2ZWMyZExpc3QiLCJ0b09iamVjdExpc3QiLCJnZXRWZWMyZExpc3QiLCJyZWFkTWVzc2FnZSIsImFkZFZlYzJkIiwid3JpdGVSZXBlYXRlZE1lc3NhZ2UiLCJnZXRSZXBlYXRlZFdyYXBwZXJGaWVsZCIsInNldFZlYzJkTGlzdCIsInNldFJlcGVhdGVkV3JhcHBlckZpZWxkIiwib3B0X3ZhbHVlIiwib3B0X2luZGV4IiwiYWRkVG9SZXBlYXRlZFdyYXBwZXJGaWVsZCIsImNsZWFyVmVjMmRMaXN0IiwidmVjMWRMaXN0IiwiZ2V0UmVwZWF0ZWRGaWVsZCIsInZhbHVlcyIsImlzRGVsaW1pdGVkIiwicmVhZFBhY2tlZFVpbnQzMiIsInJlYWRVaW50MzIiLCJpIiwiYWRkVmVjMWQiLCJnZXRWZWMxZExpc3QiLCJ3cml0ZVBhY2tlZFVpbnQzMiIsInNldFZlYzFkTGlzdCIsInNldEZpZWxkIiwiYWRkVG9SZXBlYXRlZEZpZWxkIiwiY2xlYXJWZWMxZExpc3QiLCJ4TWF4IiwieU1heCIsInpNYXgiLCJzZXRYTWF4Iiwic2V0WU1heCIsInNldFpNYXgiLCJnZXRYTWF4IiwiZ2V0WU1heCIsImdldFpNYXgiLCJkaW1lbnNpb25zIiwiZ2V0RGltZW5zaW9ucyIsInNldERpbWVuc2lvbnMiLCJ3cml0ZU1lc3NhZ2UiLCJnZXRXcmFwcGVyRmllbGQiLCJzZXRXcmFwcGVyRmllbGQiLCJjbGVhckRpbWVuc2lvbnMiLCJoYXNEaW1lbnNpb25zIiwiZ2V0RmllbGQiLCJ3b3JsZFN0YXRlSWQiLCJydWxlIiwiZ2V0UnVsZV9hc0I2NCIsIm51bVN0ZXBzIiwic2V0V29ybGRTdGF0ZUlkIiwicmVhZEJ5dGVzIiwic2V0UnVsZSIsInNldE51bVN0ZXBzIiwiZ2V0V29ybGRTdGF0ZUlkIiwiZ2V0UnVsZV9hc1U4Iiwid3JpdGVCeXRlcyIsImdldFJ1bGUiLCJieXRlc0FzQjY0IiwiYnl0ZXNBc1U4Iiwic2V0UHJvdG8zQnl0ZXNGaWVsZCIsImdldE51bVN0ZXBzIiwiY2xlYXJOdW1TdGVwcyIsImhhc051bVN0ZXBzIiwiZ2V0TWV0YWRhdGEiLCJzdGF0ZSIsImdldFN0YXRlIiwic2V0TWV0YWRhdGEiLCJzZXRTdGF0ZSIsImNsZWFyTWV0YWRhdGEiLCJoYXNNZXRhZGF0YSIsImNsZWFyU3RhdGUiLCJoYXNTdGF0ZSIsImluaXRSZXEiLCJnZXRJbml0UmVxIiwic3RlcFJlcSIsImdldFN0ZXBSZXEiLCJ0aW1lb3V0Iiwic2V0SW5pdFJlcSIsInNldFN0ZXBSZXEiLCJzZXRUaW1lb3V0IiwiY2xlYXJJbml0UmVxIiwiaGFzSW5pdFJlcSIsImNsZWFyU3RlcFJlcSIsImhhc1N0ZXBSZXEiLCJnZXRUaW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwiaGFzVGltZW91dCIsInN0YXJ0U3RhdGUiLCJnZXRTdGFydFN0YXRlIiwiZW5kU3RhdGUiLCJnZXRFbmRTdGF0ZSIsInN0YXRlQ2hhbmdlZER1cmluZ1NpbSIsImdldEJvb2xlYW5GaWVsZFdpdGhEZWZhdWx0Iiwic2V0U3RhcnRTdGF0ZSIsInNldEVuZFN0YXRlIiwicmVhZEJvb2wiLCJzZXRTdGF0ZUNoYW5nZWREdXJpbmdTaW0iLCJnZXRTdGF0ZUNoYW5nZWREdXJpbmdTaW0iLCJ3cml0ZUJvb2wiLCJjbGVhclN0YXJ0U3RhdGUiLCJoYXNTdGFydFN0YXRlIiwiY2xlYXJFbmRTdGF0ZSIsImhhc0VuZFN0YXRlIiwic2V0UHJvdG8zQm9vbGVhbkZpZWxkIiwib2JqZWN0IiwiZXh0ZW5kIiwiZXhwb3J0cyIsIm1vZHVsZSIsInJlcXVpcmUiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwic3RhdGVTZXJ2aWNlIiwiZGltcyIsInRoZW4iLCJyZXNwb25zZSIsImNvbnNvbGUiLCJsb2ciLCJjYXRjaCIsImVyciIsImNvZGUiXSwibWFwcGluZ3MiOiJ3cEJBaUJBLGdCQUVBLFlBR0EsYUFNRSxXQUFhQSxFQUNBQyxFQUNBQyxHQVdiLEtBQUFDLCtCQUFpQyxJQUFJQyxFQUFRQyxpQkFD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RCxRQUFTSSxHQUdwRUgsRUFBT0QsUSxtQkNwQmYsYUFDQSxTQUVNUSxFQUFlLElBQUksRUFBQWxMLG1CQUFtQix5QkFBMEIsS0FBTSxNQUV0RXZCLEVBQVUsSUFBSSxFQUFBTSx1QkFFZHlKLEVBQVUsSUFBSSxFQUFBakssa0JBQ2Q0TSxFQUFPLElBQUksRUFBQTVKLGVBQ2pCNEosRUFBS3JGLFFBQVEsSUFDYnFGLEVBQUtwRixRQUFRLElBQ2JvRixFQUFLbkYsUUFBUSxJQUNid0MsRUFBUWxDLGNBQWM2RSxHQUV0QixJQUFNekMsRUFBVSxJQUFJLEVBQUE3SixZQUNwQjZKLEVBQVF0QixZQUFZLEtBQ3BCc0IsRUFBUXZCLFFBQVEsNEJBRWhCMUksRUFBUXNLLFdBQVcsR0FDbkJ0SyxFQUFRb0ssV0FBV0wsR0FDbkIvSixFQUFRcUssV0FBV0osR0FFbkJ3QyxFQUFhbkwsZ0JBQWdCdEIsR0FDMUIyTSxNQUFLLFNBQUNDLEdBQ0xDLFFBQVFDLElBQUksc0JBQXNCRixFQUFTcEIsK0JBQzFDdUIsT0FBTSxTQUFDQyxHQUNSSCxRQUFRQyxJQUFJLG1CQUFtQkUsRUFBSUMsS0FBSSxLQUFLRCxFQUFJbkksYSIsImZpbGUiOiJjbGllbnQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlb3ZlcnZpZXcgZ1JQQy1XZWIgZ2VuZXJhdGVkIGNsaWVudCBzdHViIGZvciBzaW1fc2VydmVyXG4gKiBAZW5oYW5jZWFibGVcbiAqIEBwdWJsaWNcbiAqL1xuXG4vLyBDb2RlIGdlbmVyYXRlZCBieSBwcm90b2MtZ2VuLWdycGMtd2ViLiBETyBOT1QgRURJVC5cbi8vIHZlcnNpb25zOlxuLy8gXHRwcm90b2MtZ2VuLWdycGMtd2ViIHYxLjUuMFxuLy8gXHRwcm90b2MgICAgICAgICAgICAgIHY1LjI3LjNcbi8vIHNvdXJjZTogc2ltX3NlcnZlci5wcm90b1xuXG5cbi8qIGVzbGludC1kaXNhYmxlICovXG4vLyBAdHMtbm9jaGVja1xuXG5cbmltcG9ydCAqIGFzIGdycGNXZWIgZnJvbSAnZ3JwYy13ZWInO1xuXG5pbXBvcnQgKiBhcyBzaW1fc2VydmVyX3BiIGZyb20gJy4vc2ltX3NlcnZlcl9wYic7IC8vIHByb3RvIGltcG9ydDogXCJzaW1fc2VydmVyLnByb3RvXCJcblxuXG5leHBvcnQgY2xhc3MgU3RhdGVTZXJ2aWNlQ2xpZW50IHtcbiAgY2xpZW50XzogZ3JwY1dlYi5BYnN0cmFjdENsaWVudEJhc2U7XG4gIGhvc3RuYW1lXzogc3RyaW5nO1xuICBjcmVkZW50aWFsc186IG51bGwgfCB7IFtpbmRleDogc3RyaW5nXTogc3RyaW5nOyB9O1xuICBvcHRpb25zXzogbnVsbCB8IHsgW2luZGV4OiBzdHJpbmddOiBhbnk7IH07XG5cbiAgY29uc3RydWN0b3IgKGhvc3RuYW1lOiBzdHJpbmcsXG4gICAgICAgICAgICAgICBjcmVkZW50aWFscz86IG51bGwgfCB7IFtpbmRleDogc3RyaW5nXTogc3RyaW5nOyB9LFxuICAgICAgICAgICAgICAgb3B0aW9ucz86IG51bGwgfCB7IFtpbmRleDogc3RyaW5nXTogYW55OyB9KSB7XG4gICAgaWYgKCFvcHRpb25zKSBvcHRpb25zID0ge307XG4gICAgaWYgKCFjcmVkZW50aWFscykgY3JlZGVudGlhbHMgPSB7fTtcbiAgICBvcHRpb25zWydmb3JtYXQnXSA9ICdiaW5hcnknO1xuXG4gICAgdGhpcy5jbGllbnRfID0gbmV3IGdycGNXZWIuR3JwY1dlYkNsaWVudEJhc2Uob3B0aW9ucyk7XG4gICAgdGhpcy5ob3N0bmFtZV8gPSBob3N0bmFtZS5yZXBsYWNlKC9cXC8rJC8sICcnKTtcbiAgICB0aGlzLmNyZWRlbnRpYWxzXyA9IGNyZWRlbnRpYWxzO1xuICAgIHRoaXMub3B0aW9uc18gPSBvcHRpb25zO1xuICB9XG5cbiAgbWV0aG9kRGVzY3JpcHRvckluaXRXb3JsZFN0YXRlID0gbmV3IGdycGNXZWIuTWV0aG9kRGVzY3JpcHRvcihcbiAgICAnL3NpbV9zZXJ2ZXIuU3RhdGVTZXJ2aWNlL0luaXRXb3JsZFN0YXRlJyxcbiAgICBncnBjV2ViLk1ldGhvZFR5cGUuVU5BUlksXG4gICAgc2ltX3NlcnZlcl9wYi5Jbml0aWFsaXplUmVxdWVzdCxcbiAgICBzaW1fc2VydmVyX3BiLldvcmxkU3RhdGVSZXNwb25zZSxcbiAgICAocmVxdWVzdDogc2ltX3NlcnZlcl9wYi5Jbml0aWFsaXplUmVxdWVzdCkgPT4ge1xuICAgICAgcmV0dXJuIHJlcXVlc3Quc2VyaWFsaXplQmluYXJ5KCk7XG4gICAgfSxcbiAgICBzaW1fc2VydmVyX3BiLldvcmxkU3RhdGVSZXNwb25zZS5kZXNlcmlhbGl6ZUJpbmFyeVxuICApO1xuXG4gIGluaXRXb3JsZFN0YXRlKFxuICAgIHJlcXVlc3Q6IHNpbV9zZXJ2ZXJfcGIuSW5pdGlhbGl6ZVJlcXVlc3QsXG4gICAgbWV0YWRhdGE/OiBncnBjV2ViLk1ldGFkYXRhIHwgbnVsbCk6IFByb21pc2U8c2ltX3NlcnZlcl9wYi5Xb3JsZFN0YXRlUmVzcG9uc2U+O1xuXG4gIGluaXRXb3JsZFN0YXRlKFxuICAgIHJlcXVlc3Q6IHNpbV9zZXJ2ZXJfcGIuSW5pdGlhbGl6ZVJlcXVlc3QsXG4gICAgbWV0YWRhdGE6IGdycGNXZWIuTWV0YWRhdGEgfCBudWxsLFxuICAgIGNhbGxiYWNrOiAoZXJyOiBncnBjV2ViLlJwY0Vycm9yLFxuICAgICAgICAgICAgICAgcmVzcG9uc2U6IHNpbV9zZXJ2ZXJfcGIuV29ybGRTdGF0ZVJlc3BvbnNlKSA9PiB2b2lkKTogZ3JwY1dlYi5DbGllbnRSZWFkYWJsZVN0cmVhbTxzaW1fc2VydmVyX3BiLldvcmxkU3RhdGVSZXNwb25zZT47XG5cbiAgaW5pdFdvcmxkU3RhdGUoXG4gICAgcmVxdWVzdDogc2ltX3NlcnZlcl9wYi5Jbml0aWFsaXplUmVxdWVzdCxcbiAgICBtZXRhZGF0YT86IGdycGNXZWIuTWV0YWRhdGEgfCBudWxsLFxuICAgIGNhbGxiYWNrPzogKGVycjogZ3JwY1dlYi5ScGNFcnJvcixcbiAgICAgICAgICAgICAgIHJlc3BvbnNlOiBzaW1fc2VydmVyX3BiLldvcmxkU3RhdGVSZXNwb25zZSkgPT4gdm9pZCkge1xuICAgIGlmIChjYWxsYmFjayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdGhpcy5jbGllbnRfLnJwY0NhbGwoXG4gICAgICAgIHRoaXMuaG9zdG5hbWVfICtcbiAgICAgICAgICAnL3NpbV9zZXJ2ZXIuU3RhdGVTZXJ2aWNlL0luaXRXb3JsZFN0YXRlJyxcbiAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgbWV0YWRhdGEgfHwge30sXG4gICAgICAgIHRoaXMubWV0aG9kRGVzY3JpcHRvckluaXRXb3JsZFN0YXRlLFxuICAgICAgICBjYWxsYmFjayk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmNsaWVudF8udW5hcnlDYWxsKFxuICAgIHRoaXMuaG9zdG5hbWVfICtcbiAgICAgICcvc2ltX3NlcnZlci5TdGF0ZVNlcnZpY2UvSW5pdFdvcmxkU3RhdGUnLFxuICAgIHJlcXVlc3QsXG4gICAgbWV0YWRhdGEgfHwge30sXG4gICAgdGhpcy5tZXRob2REZXNjcmlwdG9ySW5pdFdvcmxkU3RhdGUpO1xuICB9XG5cbiAgbWV0aG9kRGVzY3JpcHRvclN0ZXBXb3JsZFN0YXRlRm9yd2FyZCA9IG5ldyBncnBjV2ViLk1ldGhvZERlc2NyaXB0b3IoXG4gICAgJy9zaW1fc2VydmVyLlN0YXRlU2VydmljZS9TdGVwV29ybGRTdGF0ZUZvcndhcmQnLFxuICAgIGdycGNXZWIuTWV0aG9kVHlwZS5VTkFSWSxcbiAgICBzaW1fc2VydmVyX3BiLlN0ZXBSZXF1ZXN0LFxuICAgIHNpbV9zZXJ2ZXJfcGIuV29ybGRTdGF0ZVJlc3BvbnNlLFxuICAgIChyZXF1ZXN0OiBzaW1fc2VydmVyX3BiLlN0ZXBSZXF1ZXN0KSA9PiB7XG4gICAgICByZXR1cm4gcmVxdWVzdC5zZXJpYWxpemVCaW5hcnkoKTtcbiAgICB9LFxuICAgIHNpbV9zZXJ2ZXJfcGIuV29ybGRTdGF0ZVJlc3BvbnNlLmRlc2VyaWFsaXplQmluYXJ5XG4gICk7XG5cbiAgc3RlcFdvcmxkU3RhdGVGb3J3YXJkKFxuICAgIHJlcXVlc3Q6IHNpbV9zZXJ2ZXJfcGIuU3RlcFJlcXVlc3QsXG4gICAgbWV0YWRhdGE/OiBncnBjV2ViLk1ldGFkYXRhIHwgbnVsbCk6IFByb21pc2U8c2ltX3NlcnZlcl9wYi5Xb3JsZFN0YXRlUmVzcG9uc2U+O1xuXG4gIHN0ZXBXb3JsZFN0YXRlRm9yd2FyZChcbiAgICByZXF1ZXN0OiBzaW1fc2VydmVyX3BiLlN0ZXBSZXF1ZXN0LFxuICAgIG1ldGFkYXRhOiBncnBjV2ViLk1ldGFkYXRhIHwgbnVsbCxcbiAgICBjYWxsYmFjazogKGVycjogZ3JwY1dlYi5ScGNFcnJvcixcbiAgICAgICAgICAgICAgIHJlc3BvbnNlOiBzaW1fc2VydmVyX3BiLldvcmxkU3RhdGVSZXNwb25zZSkgPT4gdm9pZCk6IGdycGNXZWIuQ2xpZW50UmVhZGFibGVTdHJlYW08c2ltX3NlcnZlcl9wYi5Xb3JsZFN0YXRlUmVzcG9uc2U+O1xuXG4gIHN0ZXBXb3JsZFN0YXRlRm9yd2FyZChcbiAgICByZXF1ZXN0OiBzaW1fc2VydmVyX3BiLlN0ZXBSZXF1ZXN0LFxuICAgIG1ldGFkYXRhPzogZ3JwY1dlYi5NZXRhZGF0YSB8IG51bGwsXG4gICAgY2FsbGJhY2s/OiAoZXJyOiBncnBjV2ViLlJwY0Vycm9yLFxuICAgICAgICAgICAgICAgcmVzcG9uc2U6IHNpbV9zZXJ2ZXJfcGIuV29ybGRTdGF0ZVJlc3BvbnNlKSA9PiB2b2lkKSB7XG4gICAgaWYgKGNhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmNsaWVudF8ucnBjQ2FsbChcbiAgICAgICAgdGhpcy5ob3N0bmFtZV8gK1xuICAgICAgICAgICcvc2ltX3NlcnZlci5TdGF0ZVNlcnZpY2UvU3RlcFdvcmxkU3RhdGVGb3J3YXJkJyxcbiAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgbWV0YWRhdGEgfHwge30sXG4gICAgICAgIHRoaXMubWV0aG9kRGVzY3JpcHRvclN0ZXBXb3JsZFN0YXRlRm9yd2FyZCxcbiAgICAgICAgY2FsbGJhY2spO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jbGllbnRfLnVuYXJ5Q2FsbChcbiAgICB0aGlzLmhvc3RuYW1lXyArXG4gICAgICAnL3NpbV9zZXJ2ZXIuU3RhdGVTZXJ2aWNlL1N0ZXBXb3JsZFN0YXRlRm9yd2FyZCcsXG4gICAgcmVxdWVzdCxcbiAgICBtZXRhZGF0YSB8fCB7fSxcbiAgICB0aGlzLm1ldGhvZERlc2NyaXB0b3JTdGVwV29ybGRTdGF0ZUZvcndhcmQpO1xuICB9XG5cbiAgbWV0aG9kRGVzY3JpcHRvclN0YXJ0U2ltdWxhdGlvbiA9IG5ldyBncnBjV2ViLk1ldGhvZERlc2NyaXB0b3IoXG4gICAgJy9zaW1fc2VydmVyLlN0YXRlU2VydmljZS9TdGFydFNpbXVsYXRpb24nLFxuICAgIGdycGNXZWIuTWV0aG9kVHlwZS5VTkFSWSxcbiAgICBzaW1fc2VydmVyX3BiLlN0YXJ0U2ltdWxhdGlvblJlcXVlc3QsXG4gICAgc2ltX3NlcnZlcl9wYi5TaW11bGF0aW9uUmVzdWx0UmVzcG9uc2UsXG4gICAgKHJlcXVlc3Q6IHNpbV9zZXJ2ZXJfcGIuU3RhcnRTaW11bGF0aW9uUmVxdWVzdCkgPT4ge1xuICAgICAgcmV0dXJuIHJlcXVlc3Quc2VyaWFsaXplQmluYXJ5KCk7XG4gICAgfSxcbiAgICBzaW1fc2VydmVyX3BiLlNpbXVsYXRpb25SZXN1bHRSZXNwb25zZS5kZXNlcmlhbGl6ZUJpbmFyeVxuICApO1xuXG4gIHN0YXJ0U2ltdWxhdGlvbihcbiAgICByZXF1ZXN0OiBzaW1fc2VydmVyX3BiLlN0YXJ0U2ltdWxhdGlvblJlcXVlc3QsXG4gICAgbWV0YWRhdGE/OiBncnBjV2ViLk1ldGFkYXRhIHwgbnVsbCk6IFByb21pc2U8c2ltX3NlcnZlcl9wYi5TaW11bGF0aW9uUmVzdWx0UmVzcG9uc2U+O1xuXG4gIHN0YXJ0U2ltdWxhdGlvbihcbiAgICByZXF1ZXN0OiBzaW1fc2VydmVyX3BiLlN0YXJ0U2ltdWxhdGlvblJlcXVlc3QsXG4gICAgbWV0YWRhdGE6IGdycGNXZWIuTWV0YWRhdGEgfCBudWxsLFxuICAgIGNhbGxiYWNrOiAoZXJyOiBncnBjV2ViLlJwY0Vycm9yLFxuICAgICAgICAgICAgICAgcmVzcG9uc2U6IHNpbV9zZXJ2ZXJfcGIuU2ltdWxhdGlvblJlc3VsdFJlc3BvbnNlKSA9PiB2b2lkKTogZ3JwY1dlYi5DbGllbnRSZWFkYWJsZVN0cmVhbTxzaW1fc2VydmVyX3BiLlNpbXVsYXRpb25SZXN1bHRSZXNwb25zZT47XG5cbiAgc3RhcnRTaW11bGF0aW9uKFxuICAgIHJlcXVlc3Q6IHNpbV9zZXJ2ZXJfcGIuU3RhcnRTaW11bGF0aW9uUmVxdWVzdCxcbiAgICBtZXRhZGF0YT86IGdycGNXZWIuTWV0YWRhdGEgfCBudWxsLFxuICAgIGNhbGxiYWNrPzogKGVycjogZ3JwY1dlYi5ScGNFcnJvcixcbiAgICAgICAgICAgICAgIHJlc3BvbnNlOiBzaW1fc2VydmVyX3BiLlNpbXVsYXRpb25SZXN1bHRSZXNwb25zZSkgPT4gdm9pZCkge1xuICAgIGlmIChjYWxsYmFjayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdGhpcy5jbGllbnRfLnJwY0NhbGwoXG4gICAgICAgIHRoaXMuaG9zdG5hbWVfICtcbiAgICAgICAgICAnL3NpbV9zZXJ2ZXIuU3RhdGVTZXJ2aWNlL1N0YXJ0U2ltdWxhdGlvbicsXG4gICAgICAgIHJlcXVlc3QsXG4gICAgICAgIG1ldGFkYXRhIHx8IHt9LFxuICAgICAgICB0aGlzLm1ldGhvZERlc2NyaXB0b3JTdGFydFNpbXVsYXRpb24sXG4gICAgICAgIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY2xpZW50Xy51bmFyeUNhbGwoXG4gICAgdGhpcy5ob3N0bmFtZV8gK1xuICAgICAgJy9zaW1fc2VydmVyLlN0YXRlU2VydmljZS9TdGFydFNpbXVsYXRpb24nLFxuICAgIHJlcXVlc3QsXG4gICAgbWV0YWRhdGEgfHwge30sXG4gICAgdGhpcy5tZXRob2REZXNjcmlwdG9yU3RhcnRTaW11bGF0aW9uKTtcbiAgfVxuXG59XG5cbiIsIi8vIHNvdXJjZTogc2ltX3NlcnZlci5wcm90b1xuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3XG4gKiBAZW5oYW5jZWFibGVcbiAqIEBzdXBwcmVzcyB7bWlzc2luZ1JlcXVpcmV9IHJlcG9ydHMgZXJyb3Igb24gaW1wbGljaXQgdHlwZSB1c2FnZXMuXG4gKiBAc3VwcHJlc3Mge21lc3NhZ2VDb252ZW50aW9uc30gSlMgQ29tcGlsZXIgcmVwb3J0cyBhbiBlcnJvciBpZiBhIHZhcmlhYmxlIG9yXG4gKiAgICAgZmllbGQgc3RhcnRzIHdpdGggJ01TR18nIGFuZCBpc24ndCBhIHRyYW5zbGF0YWJsZSBtZXNzYWdlLlxuICogQHB1YmxpY1xuICovXG4vLyBHRU5FUkFURUQgQ09ERSAtLSBETyBOT1QgRURJVCFcbi8qIGVzbGludC1kaXNhYmxlICovXG4vLyBAdHMtbm9jaGVja1xuXG52YXIganNwYiA9IHJlcXVpcmUoJ2dvb2dsZS1wcm90b2J1ZicpO1xudmFyIGdvb2cgPSBqc3BiO1xudmFyIGdsb2JhbCA9XG4gICAgKHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyAmJiBnbG9iYWxUaGlzKSB8fFxuICAgICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cpIHx8XG4gICAgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnICYmIGdsb2JhbCkgfHxcbiAgICAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmIHNlbGYpIHx8XG4gICAgKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0pLmNhbGwobnVsbCkgfHxcbiAgICBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXG5nb29nLmV4cG9ydFN5bWJvbCgncHJvdG8uc2ltX3NlcnZlci5HcmlkRGltZW5zaW9ucycsIG51bGwsIGdsb2JhbCk7XG5nb29nLmV4cG9ydFN5bWJvbCgncHJvdG8uc2ltX3NlcnZlci5Jbml0aWFsaXplUmVxdWVzdCcsIG51bGwsIGdsb2JhbCk7XG5nb29nLmV4cG9ydFN5bWJvbCgncHJvdG8uc2ltX3NlcnZlci5NZXRhZGF0YScsIG51bGwsIGdsb2JhbCk7XG5nb29nLmV4cG9ydFN5bWJvbCgncHJvdG8uc2ltX3NlcnZlci5TaW11bGF0aW9uUmVzdWx0UmVzcG9uc2UnLCBudWxsLCBnbG9iYWwpO1xuZ29vZy5leHBvcnRTeW1ib2woJ3Byb3RvLnNpbV9zZXJ2ZXIuU3RhcnRTaW11bGF0aW9uUmVxdWVzdCcsIG51bGwsIGdsb2JhbCk7XG5nb29nLmV4cG9ydFN5bWJvbCgncHJvdG8uc2ltX3NlcnZlci5TdGVwUmVxdWVzdCcsIG51bGwsIGdsb2JhbCk7XG5nb29nLmV4cG9ydFN5bWJvbCgncHJvdG8uc2ltX3NlcnZlci5WZWN0b3IyRCcsIG51bGwsIGdsb2JhbCk7XG5nb29nLmV4cG9ydFN5bWJvbCgncHJvdG8uc2ltX3NlcnZlci5WZWN0b3IzRCcsIG51bGwsIGdsb2JhbCk7XG5nb29nLmV4cG9ydFN5bWJvbCgncHJvdG8uc2ltX3NlcnZlci5Xb3JsZFN0YXRlUmVzcG9uc2UnLCBudWxsLCBnbG9iYWwpO1xuLyoqXG4gKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuXG4gKiBAcGFyYW0ge0FycmF5PX0gb3B0X2RhdGEgT3B0aW9uYWwgaW5pdGlhbCBkYXRhIGFycmF5LCB0eXBpY2FsbHkgZnJvbSBhXG4gKiBzZXJ2ZXIgcmVzcG9uc2UsIG9yIGNvbnN0cnVjdGVkIGRpcmVjdGx5IGluIEphdmFzY3JpcHQuIFRoZSBhcnJheSBpcyB1c2VkXG4gKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuXG4gKiBJZiBubyBkYXRhIGlzIHByb3ZpZGVkLCB0aGUgY29uc3RydWN0ZWQgb2JqZWN0IHdpbGwgYmUgZW1wdHksIGJ1dCBzdGlsbFxuICogdmFsaWQuXG4gKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuTWV0YWRhdGEgPSBmdW5jdGlvbihvcHRfZGF0YSkge1xuICBqc3BiLk1lc3NhZ2UuaW5pdGlhbGl6ZSh0aGlzLCBvcHRfZGF0YSwgMCwgLTEsIG51bGwsIG51bGwpO1xufTtcbmdvb2cuaW5oZXJpdHMocHJvdG8uc2ltX3NlcnZlci5NZXRhZGF0YSwganNwYi5NZXNzYWdlKTtcbmlmIChnb29nLkRFQlVHICYmICFDT01QSUxFRCkge1xuICAvKipcbiAgICogQHB1YmxpY1xuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHByb3RvLnNpbV9zZXJ2ZXIuTWV0YWRhdGEuZGlzcGxheU5hbWUgPSAncHJvdG8uc2ltX3NlcnZlci5NZXRhZGF0YSc7XG59XG4vKipcbiAqIEdlbmVyYXRlZCBieSBKc1BiQ29kZUdlbmVyYXRvci5cbiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGFcbiAqIHNlcnZlciByZXNwb25zZSwgb3IgY29uc3RydWN0ZWQgZGlyZWN0bHkgaW4gSmF2YXNjcmlwdC4gVGhlIGFycmF5IGlzIHVzZWRcbiAqIGluIHBsYWNlIGFuZCBiZWNvbWVzIHBhcnQgb2YgdGhlIGNvbnN0cnVjdGVkIG9iamVjdC4gSXQgaXMgbm90IGNsb25lZC5cbiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsXG4gKiB2YWxpZC5cbiAqIEBleHRlbmRzIHtqc3BiLk1lc3NhZ2V9XG4gKiBAY29uc3RydWN0b3JcbiAqL1xucHJvdG8uc2ltX3NlcnZlci5WZWN0b3IzRCA9IGZ1bmN0aW9uKG9wdF9kYXRhKSB7XG4gIGpzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsIG9wdF9kYXRhLCAwLCAtMSwgcHJvdG8uc2ltX3NlcnZlci5WZWN0b3IzRC5yZXBlYXRlZEZpZWxkc18sIG51bGwpO1xufTtcbmdvb2cuaW5oZXJpdHMocHJvdG8uc2ltX3NlcnZlci5WZWN0b3IzRCwganNwYi5NZXNzYWdlKTtcbmlmIChnb29nLkRFQlVHICYmICFDT01QSUxFRCkge1xuICAvKipcbiAgICogQHB1YmxpY1xuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHByb3RvLnNpbV9zZXJ2ZXIuVmVjdG9yM0QuZGlzcGxheU5hbWUgPSAncHJvdG8uc2ltX3NlcnZlci5WZWN0b3IzRCc7XG59XG4vKipcbiAqIEdlbmVyYXRlZCBieSBKc1BiQ29kZUdlbmVyYXRvci5cbiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGFcbiAqIHNlcnZlciByZXNwb25zZSwgb3IgY29uc3RydWN0ZWQgZGlyZWN0bHkgaW4gSmF2YXNjcmlwdC4gVGhlIGFycmF5IGlzIHVzZWRcbiAqIGluIHBsYWNlIGFuZCBiZWNvbWVzIHBhcnQgb2YgdGhlIGNvbnN0cnVjdGVkIG9iamVjdC4gSXQgaXMgbm90IGNsb25lZC5cbiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsXG4gKiB2YWxpZC5cbiAqIEBleHRlbmRzIHtqc3BiLk1lc3NhZ2V9XG4gKiBAY29uc3RydWN0b3JcbiAqL1xucHJvdG8uc2ltX3NlcnZlci5WZWN0b3IyRCA9IGZ1bmN0aW9uKG9wdF9kYXRhKSB7XG4gIGpzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsIG9wdF9kYXRhLCAwLCAtMSwgcHJvdG8uc2ltX3NlcnZlci5WZWN0b3IyRC5yZXBlYXRlZEZpZWxkc18sIG51bGwpO1xufTtcbmdvb2cuaW5oZXJpdHMocHJvdG8uc2ltX3NlcnZlci5WZWN0b3IyRCwganNwYi5NZXNzYWdlKTtcbmlmIChnb29nLkRFQlVHICYmICFDT01QSUxFRCkge1xuICAvKipcbiAgICogQHB1YmxpY1xuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHByb3RvLnNpbV9zZXJ2ZXIuVmVjdG9yMkQuZGlzcGxheU5hbWUgPSAncHJvdG8uc2ltX3NlcnZlci5WZWN0b3IyRCc7XG59XG4vKipcbiAqIEdlbmVyYXRlZCBieSBKc1BiQ29kZUdlbmVyYXRvci5cbiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGFcbiAqIHNlcnZlciByZXNwb25zZSwgb3IgY29uc3RydWN0ZWQgZGlyZWN0bHkgaW4gSmF2YXNjcmlwdC4gVGhlIGFycmF5IGlzIHVzZWRcbiAqIGluIHBsYWNlIGFuZCBiZWNvbWVzIHBhcnQgb2YgdGhlIGNvbnN0cnVjdGVkIG9iamVjdC4gSXQgaXMgbm90IGNsb25lZC5cbiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsXG4gKiB2YWxpZC5cbiAqIEBleHRlbmRzIHtqc3BiLk1lc3NhZ2V9XG4gKiBAY29uc3RydWN0b3JcbiAqL1xucHJvdG8uc2ltX3NlcnZlci5HcmlkRGltZW5zaW9ucyA9IGZ1bmN0aW9uKG9wdF9kYXRhKSB7XG4gIGpzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsIG9wdF9kYXRhLCAwLCAtMSwgbnVsbCwgbnVsbCk7XG59O1xuZ29vZy5pbmhlcml0cyhwcm90by5zaW1fc2VydmVyLkdyaWREaW1lbnNpb25zLCBqc3BiLk1lc3NhZ2UpO1xuaWYgKGdvb2cuREVCVUcgJiYgIUNPTVBJTEVEKSB7XG4gIC8qKlxuICAgKiBAcHVibGljXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgcHJvdG8uc2ltX3NlcnZlci5HcmlkRGltZW5zaW9ucy5kaXNwbGF5TmFtZSA9ICdwcm90by5zaW1fc2VydmVyLkdyaWREaW1lbnNpb25zJztcbn1cbi8qKlxuICogR2VuZXJhdGVkIGJ5IEpzUGJDb2RlR2VuZXJhdG9yLlxuICogQHBhcmFtIHtBcnJheT19IG9wdF9kYXRhIE9wdGlvbmFsIGluaXRpYWwgZGF0YSBhcnJheSwgdHlwaWNhbGx5IGZyb20gYVxuICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZFxuICogaW4gcGxhY2UgYW5kIGJlY29tZXMgcGFydCBvZiB0aGUgY29uc3RydWN0ZWQgb2JqZWN0LiBJdCBpcyBub3QgY2xvbmVkLlxuICogSWYgbm8gZGF0YSBpcyBwcm92aWRlZCwgdGhlIGNvbnN0cnVjdGVkIG9iamVjdCB3aWxsIGJlIGVtcHR5LCBidXQgc3RpbGxcbiAqIHZhbGlkLlxuICogQGV4dGVuZHMge2pzcGIuTWVzc2FnZX1cbiAqIEBjb25zdHJ1Y3RvclxuICovXG5wcm90by5zaW1fc2VydmVyLkluaXRpYWxpemVSZXF1ZXN0ID0gZnVuY3Rpb24ob3B0X2RhdGEpIHtcbiAganNwYi5NZXNzYWdlLmluaXRpYWxpemUodGhpcywgb3B0X2RhdGEsIDAsIC0xLCBudWxsLCBudWxsKTtcbn07XG5nb29nLmluaGVyaXRzKHByb3RvLnNpbV9zZXJ2ZXIuSW5pdGlhbGl6ZVJlcXVlc3QsIGpzcGIuTWVzc2FnZSk7XG5pZiAoZ29vZy5ERUJVRyAmJiAhQ09NUElMRUQpIHtcbiAgLyoqXG4gICAqIEBwdWJsaWNcbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBwcm90by5zaW1fc2VydmVyLkluaXRpYWxpemVSZXF1ZXN0LmRpc3BsYXlOYW1lID0gJ3Byb3RvLnNpbV9zZXJ2ZXIuSW5pdGlhbGl6ZVJlcXVlc3QnO1xufVxuLyoqXG4gKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuXG4gKiBAcGFyYW0ge0FycmF5PX0gb3B0X2RhdGEgT3B0aW9uYWwgaW5pdGlhbCBkYXRhIGFycmF5LCB0eXBpY2FsbHkgZnJvbSBhXG4gKiBzZXJ2ZXIgcmVzcG9uc2UsIG9yIGNvbnN0cnVjdGVkIGRpcmVjdGx5IGluIEphdmFzY3JpcHQuIFRoZSBhcnJheSBpcyB1c2VkXG4gKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuXG4gKiBJZiBubyBkYXRhIGlzIHByb3ZpZGVkLCB0aGUgY29uc3RydWN0ZWQgb2JqZWN0IHdpbGwgYmUgZW1wdHksIGJ1dCBzdGlsbFxuICogdmFsaWQuXG4gKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuU3RlcFJlcXVlc3QgPSBmdW5jdGlvbihvcHRfZGF0YSkge1xuICBqc3BiLk1lc3NhZ2UuaW5pdGlhbGl6ZSh0aGlzLCBvcHRfZGF0YSwgMCwgLTEsIG51bGwsIG51bGwpO1xufTtcbmdvb2cuaW5oZXJpdHMocHJvdG8uc2ltX3NlcnZlci5TdGVwUmVxdWVzdCwganNwYi5NZXNzYWdlKTtcbmlmIChnb29nLkRFQlVHICYmICFDT01QSUxFRCkge1xuICAvKipcbiAgICogQHB1YmxpY1xuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHByb3RvLnNpbV9zZXJ2ZXIuU3RlcFJlcXVlc3QuZGlzcGxheU5hbWUgPSAncHJvdG8uc2ltX3NlcnZlci5TdGVwUmVxdWVzdCc7XG59XG4vKipcbiAqIEdlbmVyYXRlZCBieSBKc1BiQ29kZUdlbmVyYXRvci5cbiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGFcbiAqIHNlcnZlciByZXNwb25zZSwgb3IgY29uc3RydWN0ZWQgZGlyZWN0bHkgaW4gSmF2YXNjcmlwdC4gVGhlIGFycmF5IGlzIHVzZWRcbiAqIGluIHBsYWNlIGFuZCBiZWNvbWVzIHBhcnQgb2YgdGhlIGNvbnN0cnVjdGVkIG9iamVjdC4gSXQgaXMgbm90IGNsb25lZC5cbiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsXG4gKiB2YWxpZC5cbiAqIEBleHRlbmRzIHtqc3BiLk1lc3NhZ2V9XG4gKiBAY29uc3RydWN0b3JcbiAqL1xucHJvdG8uc2ltX3NlcnZlci5Xb3JsZFN0YXRlUmVzcG9uc2UgPSBmdW5jdGlvbihvcHRfZGF0YSkge1xuICBqc3BiLk1lc3NhZ2UuaW5pdGlhbGl6ZSh0aGlzLCBvcHRfZGF0YSwgMCwgLTEsIG51bGwsIG51bGwpO1xufTtcbmdvb2cuaW5oZXJpdHMocHJvdG8uc2ltX3NlcnZlci5Xb3JsZFN0YXRlUmVzcG9uc2UsIGpzcGIuTWVzc2FnZSk7XG5pZiAoZ29vZy5ERUJVRyAmJiAhQ09NUElMRUQpIHtcbiAgLyoqXG4gICAqIEBwdWJsaWNcbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBwcm90by5zaW1fc2VydmVyLldvcmxkU3RhdGVSZXNwb25zZS5kaXNwbGF5TmFtZSA9ICdwcm90by5zaW1fc2VydmVyLldvcmxkU3RhdGVSZXNwb25zZSc7XG59XG4vKipcbiAqIEdlbmVyYXRlZCBieSBKc1BiQ29kZUdlbmVyYXRvci5cbiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGFcbiAqIHNlcnZlciByZXNwb25zZSwgb3IgY29uc3RydWN0ZWQgZGlyZWN0bHkgaW4gSmF2YXNjcmlwdC4gVGhlIGFycmF5IGlzIHVzZWRcbiAqIGluIHBsYWNlIGFuZCBiZWNvbWVzIHBhcnQgb2YgdGhlIGNvbnN0cnVjdGVkIG9iamVjdC4gSXQgaXMgbm90IGNsb25lZC5cbiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsXG4gKiB2YWxpZC5cbiAqIEBleHRlbmRzIHtqc3BiLk1lc3NhZ2V9XG4gKiBAY29uc3RydWN0b3JcbiAqL1xucHJvdG8uc2ltX3NlcnZlci5TdGFydFNpbXVsYXRpb25SZXF1ZXN0ID0gZnVuY3Rpb24ob3B0X2RhdGEpIHtcbiAganNwYi5NZXNzYWdlLmluaXRpYWxpemUodGhpcywgb3B0X2RhdGEsIDAsIC0xLCBudWxsLCBudWxsKTtcbn07XG5nb29nLmluaGVyaXRzKHByb3RvLnNpbV9zZXJ2ZXIuU3RhcnRTaW11bGF0aW9uUmVxdWVzdCwganNwYi5NZXNzYWdlKTtcbmlmIChnb29nLkRFQlVHICYmICFDT01QSUxFRCkge1xuICAvKipcbiAgICogQHB1YmxpY1xuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHByb3RvLnNpbV9zZXJ2ZXIuU3RhcnRTaW11bGF0aW9uUmVxdWVzdC5kaXNwbGF5TmFtZSA9ICdwcm90by5zaW1fc2VydmVyLlN0YXJ0U2ltdWxhdGlvblJlcXVlc3QnO1xufVxuLyoqXG4gKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuXG4gKiBAcGFyYW0ge0FycmF5PX0gb3B0X2RhdGEgT3B0aW9uYWwgaW5pdGlhbCBkYXRhIGFycmF5LCB0eXBpY2FsbHkgZnJvbSBhXG4gKiBzZXJ2ZXIgcmVzcG9uc2UsIG9yIGNvbnN0cnVjdGVkIGRpcmVjdGx5IGluIEphdmFzY3JpcHQuIFRoZSBhcnJheSBpcyB1c2VkXG4gKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuXG4gKiBJZiBubyBkYXRhIGlzIHByb3ZpZGVkLCB0aGUgY29uc3RydWN0ZWQgb2JqZWN0IHdpbGwgYmUgZW1wdHksIGJ1dCBzdGlsbFxuICogdmFsaWQuXG4gKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuU2ltdWxhdGlvblJlc3VsdFJlc3BvbnNlID0gZnVuY3Rpb24ob3B0X2RhdGEpIHtcbiAganNwYi5NZXNzYWdlLmluaXRpYWxpemUodGhpcywgb3B0X2RhdGEsIDAsIC0xLCBudWxsLCBudWxsKTtcbn07XG5nb29nLmluaGVyaXRzKHByb3RvLnNpbV9zZXJ2ZXIuU2ltdWxhdGlvblJlc3VsdFJlc3BvbnNlLCBqc3BiLk1lc3NhZ2UpO1xuaWYgKGdvb2cuREVCVUcgJiYgIUNPTVBJTEVEKSB7XG4gIC8qKlxuICAgKiBAcHVibGljXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgcHJvdG8uc2ltX3NlcnZlci5TaW11bGF0aW9uUmVzdWx0UmVzcG9uc2UuZGlzcGxheU5hbWUgPSAncHJvdG8uc2ltX3NlcnZlci5TaW11bGF0aW9uUmVzdWx0UmVzcG9uc2UnO1xufVxuXG5cblxuaWYgKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1QpIHtcbi8qKlxuICogQ3JlYXRlcyBhbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBwcm90by5cbiAqIEZpZWxkIG5hbWVzIHRoYXQgYXJlIHJlc2VydmVkIGluIEphdmFTY3JpcHQgYW5kIHdpbGwgYmUgcmVuYW1lZCB0byBwYl9uYW1lLlxuICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLlxuICogVG8gYWNjZXNzIGEgcmVzZXJ2ZWQgZmllbGQgdXNlLCBmb28ucGJfPG5hbWU+LCBlZywgZm9vLnBiX2RlZmF1bHQuXG4gKiBGb3IgdGhlIGxpc3Qgb2YgcmVzZXJ2ZWQgbmFtZXMgcGxlYXNlIHNlZTpcbiAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gd2hldGhlciB0byBpbmNsdWRlIHRoZVxuICogICAgIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDpcbiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uXG4gKiBAcmV0dXJuIHshT2JqZWN0fVxuICovXG5wcm90by5zaW1fc2VydmVyLk1ldGFkYXRhLnByb3RvdHlwZS50b09iamVjdCA9IGZ1bmN0aW9uKG9wdF9pbmNsdWRlSW5zdGFuY2UpIHtcbiAgcmV0dXJuIHByb3RvLnNpbV9zZXJ2ZXIuTWV0YWRhdGEudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSwgdGhpcyk7XG59O1xuXG5cbi8qKlxuICogU3RhdGljIHZlcnNpb24gb2YgdGhlIHtAc2VlIHRvT2JqZWN0fSBtZXRob2QuXG4gKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlXG4gKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDpcbiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uXG4gKiBAcGFyYW0geyFwcm90by5zaW1fc2VydmVyLk1ldGFkYXRhfSBtc2cgVGhlIG1zZyBpbnN0YW5jZSB0byB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJuIHshT2JqZWN0fVxuICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlc1xuICovXG5wcm90by5zaW1fc2VydmVyLk1ldGFkYXRhLnRvT2JqZWN0ID0gZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLCBtc2cpIHtcbiAgdmFyIGYsIG9iaiA9IHtcbiAgICBzdGF0ZUlkOiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csIDEsIDApLFxuICAgIHN0ZXA6IGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywgMiwgMCksXG4gICAgc3RhdHVzOiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csIDMsIFwiXCIpXG4gIH07XG5cbiAgaWYgKGluY2x1ZGVJbnN0YW5jZSkge1xuICAgIG9iai4kanNwYk1lc3NhZ2VJbnN0YW5jZSA9IG1zZztcbiAgfVxuICByZXR1cm4gb2JqO1xufTtcbn1cblxuXG4vKipcbiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLlxuICogQHBhcmFtIHtqc3BiLkJ5dGVTb3VyY2V9IGJ5dGVzIFRoZSBieXRlcyB0byBkZXNlcmlhbGl6ZS5cbiAqIEByZXR1cm4geyFwcm90by5zaW1fc2VydmVyLk1ldGFkYXRhfVxuICovXG5wcm90by5zaW1fc2VydmVyLk1ldGFkYXRhLmRlc2VyaWFsaXplQmluYXJ5ID0gZnVuY3Rpb24oYnl0ZXMpIHtcbiAgdmFyIHJlYWRlciA9IG5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7XG4gIHZhciBtc2cgPSBuZXcgcHJvdG8uc2ltX3NlcnZlci5NZXRhZGF0YTtcbiAgcmV0dXJuIHByb3RvLnNpbV9zZXJ2ZXIuTWV0YWRhdGEuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZywgcmVhZGVyKTtcbn07XG5cblxuLyoqXG4gKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZVxuICogZ2l2ZW4gcmVhZGVyIGludG8gdGhlIGdpdmVuIG1lc3NhZ2Ugb2JqZWN0LlxuICogQHBhcmFtIHshcHJvdG8uc2ltX3NlcnZlci5NZXRhZGF0YX0gbXNnIFRoZSBtZXNzYWdlIG9iamVjdCB0byBkZXNlcmlhbGl6ZSBpbnRvLlxuICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS5cbiAqIEByZXR1cm4geyFwcm90by5zaW1fc2VydmVyLk1ldGFkYXRhfVxuICovXG5wcm90by5zaW1fc2VydmVyLk1ldGFkYXRhLmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlciA9IGZ1bmN0aW9uKG1zZywgcmVhZGVyKSB7XG4gIHdoaWxlIChyZWFkZXIubmV4dEZpZWxkKCkpIHtcbiAgICBpZiAocmVhZGVyLmlzRW5kR3JvdXAoKSkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHZhciBmaWVsZCA9IHJlYWRlci5nZXRGaWVsZE51bWJlcigpO1xuICAgIHN3aXRjaCAoZmllbGQpIHtcbiAgICBjYXNlIDE6XG4gICAgICB2YXIgdmFsdWUgPSAvKiogQHR5cGUge251bWJlcn0gKi8gKHJlYWRlci5yZWFkSW50NjQoKSk7XG4gICAgICBtc2cuc2V0U3RhdGVJZCh2YWx1ZSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDI6XG4gICAgICB2YXIgdmFsdWUgPSAvKiogQHR5cGUge251bWJlcn0gKi8gKHJlYWRlci5yZWFkSW50NjQoKSk7XG4gICAgICBtc2cuc2V0U3RlcCh2YWx1ZSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDM6XG4gICAgICB2YXIgdmFsdWUgPSAvKiogQHR5cGUge3N0cmluZ30gKi8gKHJlYWRlci5yZWFkU3RyaW5nKCkpO1xuICAgICAgbXNnLnNldFN0YXR1cyh2YWx1ZSk7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgcmVhZGVyLnNraXBGaWVsZCgpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiBtc2c7XG59O1xuXG5cbi8qKlxuICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLlxuICogQHJldHVybiB7IVVpbnQ4QXJyYXl9XG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuTWV0YWRhdGEucHJvdG90eXBlLnNlcmlhbGl6ZUJpbmFyeSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgd3JpdGVyID0gbmV3IGpzcGIuQmluYXJ5V3JpdGVyKCk7XG4gIHByb3RvLnNpbV9zZXJ2ZXIuTWV0YWRhdGEuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIodGhpcywgd3JpdGVyKTtcbiAgcmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTtcbn07XG5cblxuLyoqXG4gKiBTZXJpYWxpemVzIHRoZSBnaXZlbiBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlXG4gKiBmb3JtYXQpLCB3cml0aW5nIHRvIHRoZSBnaXZlbiBCaW5hcnlXcml0ZXIuXG4gKiBAcGFyYW0geyFwcm90by5zaW1fc2VydmVyLk1ldGFkYXRhfSBtZXNzYWdlXG4gKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyXG4gKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzXG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuTWV0YWRhdGEuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIgPSBmdW5jdGlvbihtZXNzYWdlLCB3cml0ZXIpIHtcbiAgdmFyIGYgPSB1bmRlZmluZWQ7XG4gIGYgPSBtZXNzYWdlLmdldFN0YXRlSWQoKTtcbiAgaWYgKGYgIT09IDApIHtcbiAgICB3cml0ZXIud3JpdGVJbnQ2NChcbiAgICAgIDEsXG4gICAgICBmXG4gICAgKTtcbiAgfVxuICBmID0gbWVzc2FnZS5nZXRTdGVwKCk7XG4gIGlmIChmICE9PSAwKSB7XG4gICAgd3JpdGVyLndyaXRlSW50NjQoXG4gICAgICAyLFxuICAgICAgZlxuICAgICk7XG4gIH1cbiAgZiA9IG1lc3NhZ2UuZ2V0U3RhdHVzKCk7XG4gIGlmIChmLmxlbmd0aCA+IDApIHtcbiAgICB3cml0ZXIud3JpdGVTdHJpbmcoXG4gICAgICAzLFxuICAgICAgZlxuICAgICk7XG4gIH1cbn07XG5cblxuLyoqXG4gKiBvcHRpb25hbCBpbnQ2NCBzdGF0ZV9pZCA9IDE7XG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuTWV0YWRhdGEucHJvdG90eXBlLmdldFN0YXRlSWQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoanNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgMSwgMCkpO1xufTtcblxuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICogQHJldHVybiB7IXByb3RvLnNpbV9zZXJ2ZXIuTWV0YWRhdGF9IHJldHVybnMgdGhpc1xuICovXG5wcm90by5zaW1fc2VydmVyLk1ldGFkYXRhLnByb3RvdHlwZS5zZXRTdGF0ZUlkID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLCAxLCB2YWx1ZSk7XG59O1xuXG5cbi8qKlxuICogb3B0aW9uYWwgaW50NjQgc3RlcCA9IDI7XG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuTWV0YWRhdGEucHJvdG90eXBlLmdldFN0ZXAgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoanNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgMiwgMCkpO1xufTtcblxuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICogQHJldHVybiB7IXByb3RvLnNpbV9zZXJ2ZXIuTWV0YWRhdGF9IHJldHVybnMgdGhpc1xuICovXG5wcm90by5zaW1fc2VydmVyLk1ldGFkYXRhLnByb3RvdHlwZS5zZXRTdGVwID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLCAyLCB2YWx1ZSk7XG59O1xuXG5cbi8qKlxuICogb3B0aW9uYWwgc3RyaW5nIHN0YXR1cyA9IDM7XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuTWV0YWRhdGEucHJvdG90eXBlLmdldFN0YXR1cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gLyoqIEB0eXBlIHtzdHJpbmd9ICovIChqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCAzLCBcIlwiKSk7XG59O1xuXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gKiBAcmV0dXJuIHshcHJvdG8uc2ltX3NlcnZlci5NZXRhZGF0YX0gcmV0dXJucyB0aGlzXG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuTWV0YWRhdGEucHJvdG90eXBlLnNldFN0YXR1cyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zU3RyaW5nRmllbGQodGhpcywgMywgdmFsdWUpO1xufTtcblxuXG5cbi8qKlxuICogTGlzdCBvZiByZXBlYXRlZCBmaWVsZHMgd2l0aGluIHRoaXMgbWVzc2FnZSB0eXBlLlxuICogQHByaXZhdGUgeyFBcnJheTxudW1iZXI+fVxuICogQGNvbnN0XG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuVmVjdG9yM0QucmVwZWF0ZWRGaWVsZHNfID0gWzFdO1xuXG5cblxuaWYgKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1QpIHtcbi8qKlxuICogQ3JlYXRlcyBhbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBwcm90by5cbiAqIEZpZWxkIG5hbWVzIHRoYXQgYXJlIHJlc2VydmVkIGluIEphdmFTY3JpcHQgYW5kIHdpbGwgYmUgcmVuYW1lZCB0byBwYl9uYW1lLlxuICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLlxuICogVG8gYWNjZXNzIGEgcmVzZXJ2ZWQgZmllbGQgdXNlLCBmb28ucGJfPG5hbWU+LCBlZywgZm9vLnBiX2RlZmF1bHQuXG4gKiBGb3IgdGhlIGxpc3Qgb2YgcmVzZXJ2ZWQgbmFtZXMgcGxlYXNlIHNlZTpcbiAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gd2hldGhlciB0byBpbmNsdWRlIHRoZVxuICogICAgIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDpcbiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uXG4gKiBAcmV0dXJuIHshT2JqZWN0fVxuICovXG5wcm90by5zaW1fc2VydmVyLlZlY3RvcjNELnByb3RvdHlwZS50b09iamVjdCA9IGZ1bmN0aW9uKG9wdF9pbmNsdWRlSW5zdGFuY2UpIHtcbiAgcmV0dXJuIHByb3RvLnNpbV9zZXJ2ZXIuVmVjdG9yM0QudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSwgdGhpcyk7XG59O1xuXG5cbi8qKlxuICogU3RhdGljIHZlcnNpb24gb2YgdGhlIHtAc2VlIHRvT2JqZWN0fSBtZXRob2QuXG4gKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlXG4gKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDpcbiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uXG4gKiBAcGFyYW0geyFwcm90by5zaW1fc2VydmVyLlZlY3RvcjNEfSBtc2cgVGhlIG1zZyBpbnN0YW5jZSB0byB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJuIHshT2JqZWN0fVxuICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlc1xuICovXG5wcm90by5zaW1fc2VydmVyLlZlY3RvcjNELnRvT2JqZWN0ID0gZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLCBtc2cpIHtcbiAgdmFyIGYsIG9iaiA9IHtcbiAgICB2ZWMyZExpc3Q6IGpzcGIuTWVzc2FnZS50b09iamVjdExpc3QobXNnLmdldFZlYzJkTGlzdCgpLFxuICAgIHByb3RvLnNpbV9zZXJ2ZXIuVmVjdG9yMkQudG9PYmplY3QsIGluY2x1ZGVJbnN0YW5jZSlcbiAgfTtcblxuICBpZiAoaW5jbHVkZUluc3RhbmNlKSB7XG4gICAgb2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlID0gbXNnO1xuICB9XG4gIHJldHVybiBvYmo7XG59O1xufVxuXG5cbi8qKlxuICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuXG4gKiBAcGFyYW0ge2pzcGIuQnl0ZVNvdXJjZX0gYnl0ZXMgVGhlIGJ5dGVzIHRvIGRlc2VyaWFsaXplLlxuICogQHJldHVybiB7IXByb3RvLnNpbV9zZXJ2ZXIuVmVjdG9yM0R9XG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuVmVjdG9yM0QuZGVzZXJpYWxpemVCaW5hcnkgPSBmdW5jdGlvbihieXRlcykge1xuICB2YXIgcmVhZGVyID0gbmV3IGpzcGIuQmluYXJ5UmVhZGVyKGJ5dGVzKTtcbiAgdmFyIG1zZyA9IG5ldyBwcm90by5zaW1fc2VydmVyLlZlY3RvcjNEO1xuICByZXR1cm4gcHJvdG8uc2ltX3NlcnZlci5WZWN0b3IzRC5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIobXNnLCByZWFkZXIpO1xufTtcblxuXG4vKipcbiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpIGZyb20gdGhlXG4gKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuXG4gKiBAcGFyYW0geyFwcm90by5zaW1fc2VydmVyLlZlY3RvcjNEfSBtc2cgVGhlIG1lc3NhZ2Ugb2JqZWN0IHRvIGRlc2VyaWFsaXplIGludG8uXG4gKiBAcGFyYW0geyFqc3BiLkJpbmFyeVJlYWRlcn0gcmVhZGVyIFRoZSBCaW5hcnlSZWFkZXIgdG8gdXNlLlxuICogQHJldHVybiB7IXByb3RvLnNpbV9zZXJ2ZXIuVmVjdG9yM0R9XG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuVmVjdG9yM0QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyID0gZnVuY3Rpb24obXNnLCByZWFkZXIpIHtcbiAgd2hpbGUgKHJlYWRlci5uZXh0RmllbGQoKSkge1xuICAgIGlmIChyZWFkZXIuaXNFbmRHcm91cCgpKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgdmFyIGZpZWxkID0gcmVhZGVyLmdldEZpZWxkTnVtYmVyKCk7XG4gICAgc3dpdGNoIChmaWVsZCkge1xuICAgIGNhc2UgMTpcbiAgICAgIHZhciB2YWx1ZSA9IG5ldyBwcm90by5zaW1fc2VydmVyLlZlY3RvcjJEO1xuICAgICAgcmVhZGVyLnJlYWRNZXNzYWdlKHZhbHVlLHByb3RvLnNpbV9zZXJ2ZXIuVmVjdG9yMkQuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKTtcbiAgICAgIG1zZy5hZGRWZWMyZCh2YWx1ZSk7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgcmVhZGVyLnNraXBGaWVsZCgpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiBtc2c7XG59O1xuXG5cbi8qKlxuICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLlxuICogQHJldHVybiB7IVVpbnQ4QXJyYXl9XG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuVmVjdG9yM0QucHJvdG90eXBlLnNlcmlhbGl6ZUJpbmFyeSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgd3JpdGVyID0gbmV3IGpzcGIuQmluYXJ5V3JpdGVyKCk7XG4gIHByb3RvLnNpbV9zZXJ2ZXIuVmVjdG9yM0Quc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIodGhpcywgd3JpdGVyKTtcbiAgcmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTtcbn07XG5cblxuLyoqXG4gKiBTZXJpYWxpemVzIHRoZSBnaXZlbiBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlXG4gKiBmb3JtYXQpLCB3cml0aW5nIHRvIHRoZSBnaXZlbiBCaW5hcnlXcml0ZXIuXG4gKiBAcGFyYW0geyFwcm90by5zaW1fc2VydmVyLlZlY3RvcjNEfSBtZXNzYWdlXG4gKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyXG4gKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzXG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuVmVjdG9yM0Quc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIgPSBmdW5jdGlvbihtZXNzYWdlLCB3cml0ZXIpIHtcbiAgdmFyIGYgPSB1bmRlZmluZWQ7XG4gIGYgPSBtZXNzYWdlLmdldFZlYzJkTGlzdCgpO1xuICBpZiAoZi5sZW5ndGggPiAwKSB7XG4gICAgd3JpdGVyLndyaXRlUmVwZWF0ZWRNZXNzYWdlKFxuICAgICAgMSxcbiAgICAgIGYsXG4gICAgICBwcm90by5zaW1fc2VydmVyLlZlY3RvcjJELnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyXG4gICAgKTtcbiAgfVxufTtcblxuXG4vKipcbiAqIHJlcGVhdGVkIFZlY3RvcjJEIHZlYzJkID0gMTtcbiAqIEByZXR1cm4geyFBcnJheTwhcHJvdG8uc2ltX3NlcnZlci5WZWN0b3IyRD59XG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuVmVjdG9yM0QucHJvdG90eXBlLmdldFZlYzJkTGlzdCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gLyoqIEB0eXBleyFBcnJheTwhcHJvdG8uc2ltX3NlcnZlci5WZWN0b3IyRD59ICovIChcbiAgICBqc3BiLk1lc3NhZ2UuZ2V0UmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcywgcHJvdG8uc2ltX3NlcnZlci5WZWN0b3IyRCwgMSkpO1xufTtcblxuXG4vKipcbiAqIEBwYXJhbSB7IUFycmF5PCFwcm90by5zaW1fc2VydmVyLlZlY3RvcjJEPn0gdmFsdWVcbiAqIEByZXR1cm4geyFwcm90by5zaW1fc2VydmVyLlZlY3RvcjNEfSByZXR1cm5zIHRoaXNcbiovXG5wcm90by5zaW1fc2VydmVyLlZlY3RvcjNELnByb3RvdHlwZS5zZXRWZWMyZExpc3QgPSBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFJlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsIDEsIHZhbHVlKTtcbn07XG5cblxuLyoqXG4gKiBAcGFyYW0geyFwcm90by5zaW1fc2VydmVyLlZlY3RvcjJEPX0gb3B0X3ZhbHVlXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9pbmRleFxuICogQHJldHVybiB7IXByb3RvLnNpbV9zZXJ2ZXIuVmVjdG9yMkR9XG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuVmVjdG9yM0QucHJvdG90eXBlLmFkZFZlYzJkID0gZnVuY3Rpb24ob3B0X3ZhbHVlLCBvcHRfaW5kZXgpIHtcbiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5hZGRUb1JlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsIDEsIG9wdF92YWx1ZSwgcHJvdG8uc2ltX3NlcnZlci5WZWN0b3IyRCwgb3B0X2luZGV4KTtcbn07XG5cblxuLyoqXG4gKiBDbGVhcnMgdGhlIGxpc3QgbWFraW5nIGl0IGVtcHR5IGJ1dCBub24tbnVsbC5cbiAqIEByZXR1cm4geyFwcm90by5zaW1fc2VydmVyLlZlY3RvcjNEfSByZXR1cm5zIHRoaXNcbiAqL1xucHJvdG8uc2ltX3NlcnZlci5WZWN0b3IzRC5wcm90b3R5cGUuY2xlYXJWZWMyZExpc3QgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuc2V0VmVjMmRMaXN0KFtdKTtcbn07XG5cblxuXG4vKipcbiAqIExpc3Qgb2YgcmVwZWF0ZWQgZmllbGRzIHdpdGhpbiB0aGlzIG1lc3NhZ2UgdHlwZS5cbiAqIEBwcml2YXRlIHshQXJyYXk8bnVtYmVyPn1cbiAqIEBjb25zdFxuICovXG5wcm90by5zaW1fc2VydmVyLlZlY3RvcjJELnJlcGVhdGVkRmllbGRzXyA9IFsxXTtcblxuXG5cbmlmIChqc3BiLk1lc3NhZ2UuR0VORVJBVEVfVE9fT0JKRUNUKSB7XG4vKipcbiAqIENyZWF0ZXMgYW4gb2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcHJvdG8uXG4gKiBGaWVsZCBuYW1lcyB0aGF0IGFyZSByZXNlcnZlZCBpbiBKYXZhU2NyaXB0IGFuZCB3aWxsIGJlIHJlbmFtZWQgdG8gcGJfbmFtZS5cbiAqIE9wdGlvbmFsIGZpZWxkcyB0aGF0IGFyZSBub3Qgc2V0IHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC5cbiAqIFRvIGFjY2VzcyBhIHJlc2VydmVkIGZpZWxkIHVzZSwgZm9vLnBiXzxuYW1lPiwgZWcsIGZvby5wYl9kZWZhdWx0LlxuICogRm9yIHRoZSBsaXN0IG9mIHJlc2VydmVkIG5hbWVzIHBsZWFzZSBzZWU6XG4gKiAgICAgbmV0L3Byb3RvMi9jb21waWxlci9qcy9pbnRlcm5hbC9nZW5lcmF0b3IuY2Mja0tleXdvcmQuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIHdoZXRoZXIgdG8gaW5jbHVkZSB0aGVcbiAqICAgICBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6XG4gKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvblxuICogQHJldHVybiB7IU9iamVjdH1cbiAqL1xucHJvdG8uc2ltX3NlcnZlci5WZWN0b3IyRC5wcm90b3R5cGUudG9PYmplY3QgPSBmdW5jdGlvbihvcHRfaW5jbHVkZUluc3RhbmNlKSB7XG4gIHJldHVybiBwcm90by5zaW1fc2VydmVyLlZlY3RvcjJELnRvT2JqZWN0KG9wdF9pbmNsdWRlSW5zdGFuY2UsIHRoaXMpO1xufTtcblxuXG4vKipcbiAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLlxuICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIFdoZXRoZXIgdG8gaW5jbHVkZVxuICogICAgIHRoZSBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6XG4gKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvblxuICogQHBhcmFtIHshcHJvdG8uc2ltX3NlcnZlci5WZWN0b3IyRH0gbXNnIFRoZSBtc2cgaW5zdGFuY2UgdG8gdHJhbnNmb3JtLlxuICogQHJldHVybiB7IU9iamVjdH1cbiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXNcbiAqL1xucHJvdG8uc2ltX3NlcnZlci5WZWN0b3IyRC50b09iamVjdCA9IGZ1bmN0aW9uKGluY2x1ZGVJbnN0YW5jZSwgbXNnKSB7XG4gIHZhciBmLCBvYmogPSB7XG4gICAgdmVjMWRMaXN0OiAoZiA9IGpzcGIuTWVzc2FnZS5nZXRSZXBlYXRlZEZpZWxkKG1zZywgMSkpID09IG51bGwgPyB1bmRlZmluZWQgOiBmXG4gIH07XG5cbiAgaWYgKGluY2x1ZGVJbnN0YW5jZSkge1xuICAgIG9iai4kanNwYk1lc3NhZ2VJbnN0YW5jZSA9IG1zZztcbiAgfVxuICByZXR1cm4gb2JqO1xufTtcbn1cblxuXG4vKipcbiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLlxuICogQHBhcmFtIHtqc3BiLkJ5dGVTb3VyY2V9IGJ5dGVzIFRoZSBieXRlcyB0byBkZXNlcmlhbGl6ZS5cbiAqIEByZXR1cm4geyFwcm90by5zaW1fc2VydmVyLlZlY3RvcjJEfVxuICovXG5wcm90by5zaW1fc2VydmVyLlZlY3RvcjJELmRlc2VyaWFsaXplQmluYXJ5ID0gZnVuY3Rpb24oYnl0ZXMpIHtcbiAgdmFyIHJlYWRlciA9IG5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7XG4gIHZhciBtc2cgPSBuZXcgcHJvdG8uc2ltX3NlcnZlci5WZWN0b3IyRDtcbiAgcmV0dXJuIHByb3RvLnNpbV9zZXJ2ZXIuVmVjdG9yMkQuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZywgcmVhZGVyKTtcbn07XG5cblxuLyoqXG4gKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZVxuICogZ2l2ZW4gcmVhZGVyIGludG8gdGhlIGdpdmVuIG1lc3NhZ2Ugb2JqZWN0LlxuICogQHBhcmFtIHshcHJvdG8uc2ltX3NlcnZlci5WZWN0b3IyRH0gbXNnIFRoZSBtZXNzYWdlIG9iamVjdCB0byBkZXNlcmlhbGl6ZSBpbnRvLlxuICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS5cbiAqIEByZXR1cm4geyFwcm90by5zaW1fc2VydmVyLlZlY3RvcjJEfVxuICovXG5wcm90by5zaW1fc2VydmVyLlZlY3RvcjJELmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlciA9IGZ1bmN0aW9uKG1zZywgcmVhZGVyKSB7XG4gIHdoaWxlIChyZWFkZXIubmV4dEZpZWxkKCkpIHtcbiAgICBpZiAocmVhZGVyLmlzRW5kR3JvdXAoKSkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHZhciBmaWVsZCA9IHJlYWRlci5nZXRGaWVsZE51bWJlcigpO1xuICAgIHN3aXRjaCAoZmllbGQpIHtcbiAgICBjYXNlIDE6XG4gICAgICB2YXIgdmFsdWVzID0gLyoqIEB0eXBlIHshQXJyYXk8bnVtYmVyPn0gKi8gKHJlYWRlci5pc0RlbGltaXRlZCgpID8gcmVhZGVyLnJlYWRQYWNrZWRVaW50MzIoKSA6IFtyZWFkZXIucmVhZFVpbnQzMigpXSk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBtc2cuYWRkVmVjMWQodmFsdWVzW2ldKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZWFkZXIuc2tpcEZpZWxkKCk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG1zZztcbn07XG5cblxuLyoqXG4gKiBTZXJpYWxpemVzIHRoZSBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuXG4gKiBAcmV0dXJuIHshVWludDhBcnJheX1cbiAqL1xucHJvdG8uc2ltX3NlcnZlci5WZWN0b3IyRC5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5ID0gZnVuY3Rpb24oKSB7XG4gIHZhciB3cml0ZXIgPSBuZXcganNwYi5CaW5hcnlXcml0ZXIoKTtcbiAgcHJvdG8uc2ltX3NlcnZlci5WZWN0b3IyRC5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcih0aGlzLCB3cml0ZXIpO1xuICByZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO1xufTtcblxuXG4vKipcbiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmVcbiAqIGZvcm1hdCksIHdyaXRpbmcgdG8gdGhlIGdpdmVuIEJpbmFyeVdyaXRlci5cbiAqIEBwYXJhbSB7IXByb3RvLnNpbV9zZXJ2ZXIuVmVjdG9yMkR9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5V3JpdGVyfSB3cml0ZXJcbiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXNcbiAqL1xucHJvdG8uc2ltX3NlcnZlci5WZWN0b3IyRC5zZXJpYWxpemVCaW5hcnlUb1dyaXRlciA9IGZ1bmN0aW9uKG1lc3NhZ2UsIHdyaXRlcikge1xuICB2YXIgZiA9IHVuZGVmaW5lZDtcbiAgZiA9IG1lc3NhZ2UuZ2V0VmVjMWRMaXN0KCk7XG4gIGlmIChmLmxlbmd0aCA+IDApIHtcbiAgICB3cml0ZXIud3JpdGVQYWNrZWRVaW50MzIoXG4gICAgICAxLFxuICAgICAgZlxuICAgICk7XG4gIH1cbn07XG5cblxuLyoqXG4gKiByZXBlYXRlZCB1aW50MzIgdmVjMWQgPSAxO1xuICogQHJldHVybiB7IUFycmF5PG51bWJlcj59XG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuVmVjdG9yMkQucHJvdG90eXBlLmdldFZlYzFkTGlzdCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gLyoqIEB0eXBlIHshQXJyYXk8bnVtYmVyPn0gKi8gKGpzcGIuTWVzc2FnZS5nZXRSZXBlYXRlZEZpZWxkKHRoaXMsIDEpKTtcbn07XG5cblxuLyoqXG4gKiBAcGFyYW0geyFBcnJheTxudW1iZXI+fSB2YWx1ZVxuICogQHJldHVybiB7IXByb3RvLnNpbV9zZXJ2ZXIuVmVjdG9yMkR9IHJldHVybnMgdGhpc1xuICovXG5wcm90by5zaW1fc2VydmVyLlZlY3RvcjJELnByb3RvdHlwZS5zZXRWZWMxZExpc3QgPSBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4ganNwYi5NZXNzYWdlLnNldEZpZWxkKHRoaXMsIDEsIHZhbHVlIHx8IFtdKTtcbn07XG5cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2luZGV4XG4gKiBAcmV0dXJuIHshcHJvdG8uc2ltX3NlcnZlci5WZWN0b3IyRH0gcmV0dXJucyB0aGlzXG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuVmVjdG9yMkQucHJvdG90eXBlLmFkZFZlYzFkID0gZnVuY3Rpb24odmFsdWUsIG9wdF9pbmRleCkge1xuICByZXR1cm4ganNwYi5NZXNzYWdlLmFkZFRvUmVwZWF0ZWRGaWVsZCh0aGlzLCAxLCB2YWx1ZSwgb3B0X2luZGV4KTtcbn07XG5cblxuLyoqXG4gKiBDbGVhcnMgdGhlIGxpc3QgbWFraW5nIGl0IGVtcHR5IGJ1dCBub24tbnVsbC5cbiAqIEByZXR1cm4geyFwcm90by5zaW1fc2VydmVyLlZlY3RvcjJEfSByZXR1cm5zIHRoaXNcbiAqL1xucHJvdG8uc2ltX3NlcnZlci5WZWN0b3IyRC5wcm90b3R5cGUuY2xlYXJWZWMxZExpc3QgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuc2V0VmVjMWRMaXN0KFtdKTtcbn07XG5cblxuXG5cblxuaWYgKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1QpIHtcbi8qKlxuICogQ3JlYXRlcyBhbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBwcm90by5cbiAqIEZpZWxkIG5hbWVzIHRoYXQgYXJlIHJlc2VydmVkIGluIEphdmFTY3JpcHQgYW5kIHdpbGwgYmUgcmVuYW1lZCB0byBwYl9uYW1lLlxuICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLlxuICogVG8gYWNjZXNzIGEgcmVzZXJ2ZWQgZmllbGQgdXNlLCBmb28ucGJfPG5hbWU+LCBlZywgZm9vLnBiX2RlZmF1bHQuXG4gKiBGb3IgdGhlIGxpc3Qgb2YgcmVzZXJ2ZWQgbmFtZXMgcGxlYXNlIHNlZTpcbiAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gd2hldGhlciB0byBpbmNsdWRlIHRoZVxuICogICAgIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDpcbiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uXG4gKiBAcmV0dXJuIHshT2JqZWN0fVxuICovXG5wcm90by5zaW1fc2VydmVyLkdyaWREaW1lbnNpb25zLnByb3RvdHlwZS50b09iamVjdCA9IGZ1bmN0aW9uKG9wdF9pbmNsdWRlSW5zdGFuY2UpIHtcbiAgcmV0dXJuIHByb3RvLnNpbV9zZXJ2ZXIuR3JpZERpbWVuc2lvbnMudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSwgdGhpcyk7XG59O1xuXG5cbi8qKlxuICogU3RhdGljIHZlcnNpb24gb2YgdGhlIHtAc2VlIHRvT2JqZWN0fSBtZXRob2QuXG4gKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlXG4gKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDpcbiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uXG4gKiBAcGFyYW0geyFwcm90by5zaW1fc2VydmVyLkdyaWREaW1lbnNpb25zfSBtc2cgVGhlIG1zZyBpbnN0YW5jZSB0byB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJuIHshT2JqZWN0fVxuICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlc1xuICovXG5wcm90by5zaW1fc2VydmVyLkdyaWREaW1lbnNpb25zLnRvT2JqZWN0ID0gZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLCBtc2cpIHtcbiAgdmFyIGYsIG9iaiA9IHtcbiAgICB4TWF4OiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csIDEsIDApLFxuICAgIHlNYXg6IGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywgMiwgMCksXG4gICAgek1heDoganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCAzLCAwKVxuICB9O1xuXG4gIGlmIChpbmNsdWRlSW5zdGFuY2UpIHtcbiAgICBvYmouJGpzcGJNZXNzYWdlSW5zdGFuY2UgPSBtc2c7XG4gIH1cbiAgcmV0dXJuIG9iajtcbn07XG59XG5cblxuLyoqXG4gKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS5cbiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuXG4gKiBAcmV0dXJuIHshcHJvdG8uc2ltX3NlcnZlci5HcmlkRGltZW5zaW9uc31cbiAqL1xucHJvdG8uc2ltX3NlcnZlci5HcmlkRGltZW5zaW9ucy5kZXNlcmlhbGl6ZUJpbmFyeSA9IGZ1bmN0aW9uKGJ5dGVzKSB7XG4gIHZhciByZWFkZXIgPSBuZXcganNwYi5CaW5hcnlSZWFkZXIoYnl0ZXMpO1xuICB2YXIgbXNnID0gbmV3IHByb3RvLnNpbV9zZXJ2ZXIuR3JpZERpbWVuc2lvbnM7XG4gIHJldHVybiBwcm90by5zaW1fc2VydmVyLkdyaWREaW1lbnNpb25zLmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcihtc2csIHJlYWRlcik7XG59O1xuXG5cbi8qKlxuICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkgZnJvbSB0aGVcbiAqIGdpdmVuIHJlYWRlciBpbnRvIHRoZSBnaXZlbiBtZXNzYWdlIG9iamVjdC5cbiAqIEBwYXJhbSB7IXByb3RvLnNpbV9zZXJ2ZXIuR3JpZERpbWVuc2lvbnN9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by5cbiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5UmVhZGVyfSByZWFkZXIgVGhlIEJpbmFyeVJlYWRlciB0byB1c2UuXG4gKiBAcmV0dXJuIHshcHJvdG8uc2ltX3NlcnZlci5HcmlkRGltZW5zaW9uc31cbiAqL1xucHJvdG8uc2ltX3NlcnZlci5HcmlkRGltZW5zaW9ucy5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIgPSBmdW5jdGlvbihtc2csIHJlYWRlcikge1xuICB3aGlsZSAocmVhZGVyLm5leHRGaWVsZCgpKSB7XG4gICAgaWYgKHJlYWRlci5pc0VuZEdyb3VwKCkpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICB2YXIgZmllbGQgPSByZWFkZXIuZ2V0RmllbGROdW1iZXIoKTtcbiAgICBzd2l0Y2ggKGZpZWxkKSB7XG4gICAgY2FzZSAxOlxuICAgICAgdmFyIHZhbHVlID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChyZWFkZXIucmVhZEludDY0KCkpO1xuICAgICAgbXNnLnNldFhNYXgodmFsdWUpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAyOlxuICAgICAgdmFyIHZhbHVlID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChyZWFkZXIucmVhZEludDY0KCkpO1xuICAgICAgbXNnLnNldFlNYXgodmFsdWUpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzOlxuICAgICAgdmFyIHZhbHVlID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChyZWFkZXIucmVhZEludDY0KCkpO1xuICAgICAgbXNnLnNldFpNYXgodmFsdWUpO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJlYWRlci5za2lwRmllbGQoKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbXNnO1xufTtcblxuXG4vKipcbiAqIFNlcmlhbGl6ZXMgdGhlIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS5cbiAqIEByZXR1cm4geyFVaW50OEFycmF5fVxuICovXG5wcm90by5zaW1fc2VydmVyLkdyaWREaW1lbnNpb25zLnByb3RvdHlwZS5zZXJpYWxpemVCaW5hcnkgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHdyaXRlciA9IG5ldyBqc3BiLkJpbmFyeVdyaXRlcigpO1xuICBwcm90by5zaW1fc2VydmVyLkdyaWREaW1lbnNpb25zLnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsIHdyaXRlcik7XG4gIHJldHVybiB3cml0ZXIuZ2V0UmVzdWx0QnVmZmVyKCk7XG59O1xuXG5cbi8qKlxuICogU2VyaWFsaXplcyB0aGUgZ2l2ZW4gbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZVxuICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLlxuICogQHBhcmFtIHshcHJvdG8uc2ltX3NlcnZlci5HcmlkRGltZW5zaW9uc30gbWVzc2FnZVxuICogQHBhcmFtIHshanNwYi5CaW5hcnlXcml0ZXJ9IHdyaXRlclxuICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlc1xuICovXG5wcm90by5zaW1fc2VydmVyLkdyaWREaW1lbnNpb25zLnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyID0gZnVuY3Rpb24obWVzc2FnZSwgd3JpdGVyKSB7XG4gIHZhciBmID0gdW5kZWZpbmVkO1xuICBmID0gbWVzc2FnZS5nZXRYTWF4KCk7XG4gIGlmIChmICE9PSAwKSB7XG4gICAgd3JpdGVyLndyaXRlSW50NjQoXG4gICAgICAxLFxuICAgICAgZlxuICAgICk7XG4gIH1cbiAgZiA9IG1lc3NhZ2UuZ2V0WU1heCgpO1xuICBpZiAoZiAhPT0gMCkge1xuICAgIHdyaXRlci53cml0ZUludDY0KFxuICAgICAgMixcbiAgICAgIGZcbiAgICApO1xuICB9XG4gIGYgPSBtZXNzYWdlLmdldFpNYXgoKTtcbiAgaWYgKGYgIT09IDApIHtcbiAgICB3cml0ZXIud3JpdGVJbnQ2NChcbiAgICAgIDMsXG4gICAgICBmXG4gICAgKTtcbiAgfVxufTtcblxuXG4vKipcbiAqIG9wdGlvbmFsIGludDY0IHhfbWF4ID0gMTtcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xucHJvdG8uc2ltX3NlcnZlci5HcmlkRGltZW5zaW9ucy5wcm90b3R5cGUuZ2V0WE1heCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCAxLCAwKSk7XG59O1xuXG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gKiBAcmV0dXJuIHshcHJvdG8uc2ltX3NlcnZlci5HcmlkRGltZW5zaW9uc30gcmV0dXJucyB0aGlzXG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuR3JpZERpbWVuc2lvbnMucHJvdG90eXBlLnNldFhNYXggPSBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsIDEsIHZhbHVlKTtcbn07XG5cblxuLyoqXG4gKiBvcHRpb25hbCBpbnQ2NCB5X21heCA9IDI7XG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuR3JpZERpbWVuc2lvbnMucHJvdG90eXBlLmdldFlNYXggPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoanNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgMiwgMCkpO1xufTtcblxuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICogQHJldHVybiB7IXByb3RvLnNpbV9zZXJ2ZXIuR3JpZERpbWVuc2lvbnN9IHJldHVybnMgdGhpc1xuICovXG5wcm90by5zaW1fc2VydmVyLkdyaWREaW1lbnNpb25zLnByb3RvdHlwZS5zZXRZTWF4ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLCAyLCB2YWx1ZSk7XG59O1xuXG5cbi8qKlxuICogb3B0aW9uYWwgaW50NjQgel9tYXggPSAzO1xuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5wcm90by5zaW1fc2VydmVyLkdyaWREaW1lbnNpb25zLnByb3RvdHlwZS5nZXRaTWF4ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsIDMsIDApKTtcbn07XG5cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAqIEByZXR1cm4geyFwcm90by5zaW1fc2VydmVyLkdyaWREaW1lbnNpb25zfSByZXR1cm5zIHRoaXNcbiAqL1xucHJvdG8uc2ltX3NlcnZlci5HcmlkRGltZW5zaW9ucy5wcm90b3R5cGUuc2V0Wk1heCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywgMywgdmFsdWUpO1xufTtcblxuXG5cblxuXG5pZiAoanNwYi5NZXNzYWdlLkdFTkVSQVRFX1RPX09CSkVDVCkge1xuLyoqXG4gKiBDcmVhdGVzIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHByb3RvLlxuICogRmllbGQgbmFtZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgaW4gSmF2YVNjcmlwdCBhbmQgd2lsbCBiZSByZW5hbWVkIHRvIHBiX25hbWUuXG4gKiBPcHRpb25hbCBmaWVsZHMgdGhhdCBhcmUgbm90IHNldCB3aWxsIGJlIHNldCB0byB1bmRlZmluZWQuXG4gKiBUbyBhY2Nlc3MgYSByZXNlcnZlZCBmaWVsZCB1c2UsIGZvby5wYl88bmFtZT4sIGVnLCBmb28ucGJfZGVmYXVsdC5cbiAqIEZvciB0aGUgbGlzdCBvZiByZXNlcnZlZCBuYW1lcyBwbGVhc2Ugc2VlOlxuICogICAgIG5ldC9wcm90bzIvY29tcGlsZXIvanMvaW50ZXJuYWwvZ2VuZXJhdG9yLmNjI2tLZXl3b3JkLlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiB3aGV0aGVyIHRvIGluY2x1ZGUgdGhlXG4gKiAgICAgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OlxuICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb25cbiAqIEByZXR1cm4geyFPYmplY3R9XG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuSW5pdGlhbGl6ZVJlcXVlc3QucHJvdG90eXBlLnRvT2JqZWN0ID0gZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSkge1xuICByZXR1cm4gcHJvdG8uc2ltX3NlcnZlci5Jbml0aWFsaXplUmVxdWVzdC50b09iamVjdChvcHRfaW5jbHVkZUluc3RhbmNlLCB0aGlzKTtcbn07XG5cblxuLyoqXG4gKiBTdGF0aWMgdmVyc2lvbiBvZiB0aGUge0BzZWUgdG9PYmplY3R9IG1ldGhvZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbnx1bmRlZmluZWR9IGluY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiBXaGV0aGVyIHRvIGluY2x1ZGVcbiAqICAgICB0aGUgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OlxuICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb25cbiAqIEBwYXJhbSB7IXByb3RvLnNpbV9zZXJ2ZXIuSW5pdGlhbGl6ZVJlcXVlc3R9IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS5cbiAqIEByZXR1cm4geyFPYmplY3R9XG4gKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzXG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuSW5pdGlhbGl6ZVJlcXVlc3QudG9PYmplY3QgPSBmdW5jdGlvbihpbmNsdWRlSW5zdGFuY2UsIG1zZykge1xuICB2YXIgZiwgb2JqID0ge1xuICAgIGRpbWVuc2lvbnM6IChmID0gbXNnLmdldERpbWVuc2lvbnMoKSkgJiYgcHJvdG8uc2ltX3NlcnZlci5HcmlkRGltZW5zaW9ucy50b09iamVjdChpbmNsdWRlSW5zdGFuY2UsIGYpXG4gIH07XG5cbiAgaWYgKGluY2x1ZGVJbnN0YW5jZSkge1xuICAgIG9iai4kanNwYk1lc3NhZ2VJbnN0YW5jZSA9IG1zZztcbiAgfVxuICByZXR1cm4gb2JqO1xufTtcbn1cblxuXG4vKipcbiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLlxuICogQHBhcmFtIHtqc3BiLkJ5dGVTb3VyY2V9IGJ5dGVzIFRoZSBieXRlcyB0byBkZXNlcmlhbGl6ZS5cbiAqIEByZXR1cm4geyFwcm90by5zaW1fc2VydmVyLkluaXRpYWxpemVSZXF1ZXN0fVxuICovXG5wcm90by5zaW1fc2VydmVyLkluaXRpYWxpemVSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5ID0gZnVuY3Rpb24oYnl0ZXMpIHtcbiAgdmFyIHJlYWRlciA9IG5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7XG4gIHZhciBtc2cgPSBuZXcgcHJvdG8uc2ltX3NlcnZlci5Jbml0aWFsaXplUmVxdWVzdDtcbiAgcmV0dXJuIHByb3RvLnNpbV9zZXJ2ZXIuSW5pdGlhbGl6ZVJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZywgcmVhZGVyKTtcbn07XG5cblxuLyoqXG4gKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZVxuICogZ2l2ZW4gcmVhZGVyIGludG8gdGhlIGdpdmVuIG1lc3NhZ2Ugb2JqZWN0LlxuICogQHBhcmFtIHshcHJvdG8uc2ltX3NlcnZlci5Jbml0aWFsaXplUmVxdWVzdH0gbXNnIFRoZSBtZXNzYWdlIG9iamVjdCB0byBkZXNlcmlhbGl6ZSBpbnRvLlxuICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS5cbiAqIEByZXR1cm4geyFwcm90by5zaW1fc2VydmVyLkluaXRpYWxpemVSZXF1ZXN0fVxuICovXG5wcm90by5zaW1fc2VydmVyLkluaXRpYWxpemVSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlciA9IGZ1bmN0aW9uKG1zZywgcmVhZGVyKSB7XG4gIHdoaWxlIChyZWFkZXIubmV4dEZpZWxkKCkpIHtcbiAgICBpZiAocmVhZGVyLmlzRW5kR3JvdXAoKSkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHZhciBmaWVsZCA9IHJlYWRlci5nZXRGaWVsZE51bWJlcigpO1xuICAgIHN3aXRjaCAoZmllbGQpIHtcbiAgICBjYXNlIDE6XG4gICAgICB2YXIgdmFsdWUgPSBuZXcgcHJvdG8uc2ltX3NlcnZlci5HcmlkRGltZW5zaW9ucztcbiAgICAgIHJlYWRlci5yZWFkTWVzc2FnZSh2YWx1ZSxwcm90by5zaW1fc2VydmVyLkdyaWREaW1lbnNpb25zLmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcik7XG4gICAgICBtc2cuc2V0RGltZW5zaW9ucyh2YWx1ZSk7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgcmVhZGVyLnNraXBGaWVsZCgpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiBtc2c7XG59O1xuXG5cbi8qKlxuICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLlxuICogQHJldHVybiB7IVVpbnQ4QXJyYXl9XG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuSW5pdGlhbGl6ZVJlcXVlc3QucHJvdG90eXBlLnNlcmlhbGl6ZUJpbmFyeSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgd3JpdGVyID0gbmV3IGpzcGIuQmluYXJ5V3JpdGVyKCk7XG4gIHByb3RvLnNpbV9zZXJ2ZXIuSW5pdGlhbGl6ZVJlcXVlc3Quc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIodGhpcywgd3JpdGVyKTtcbiAgcmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTtcbn07XG5cblxuLyoqXG4gKiBTZXJpYWxpemVzIHRoZSBnaXZlbiBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlXG4gKiBmb3JtYXQpLCB3cml0aW5nIHRvIHRoZSBnaXZlbiBCaW5hcnlXcml0ZXIuXG4gKiBAcGFyYW0geyFwcm90by5zaW1fc2VydmVyLkluaXRpYWxpemVSZXF1ZXN0fSBtZXNzYWdlXG4gKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyXG4gKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzXG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuSW5pdGlhbGl6ZVJlcXVlc3Quc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIgPSBmdW5jdGlvbihtZXNzYWdlLCB3cml0ZXIpIHtcbiAgdmFyIGYgPSB1bmRlZmluZWQ7XG4gIGYgPSBtZXNzYWdlLmdldERpbWVuc2lvbnMoKTtcbiAgaWYgKGYgIT0gbnVsbCkge1xuICAgIHdyaXRlci53cml0ZU1lc3NhZ2UoXG4gICAgICAxLFxuICAgICAgZixcbiAgICAgIHByb3RvLnNpbV9zZXJ2ZXIuR3JpZERpbWVuc2lvbnMuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXJcbiAgICApO1xuICB9XG59O1xuXG5cbi8qKlxuICogb3B0aW9uYWwgR3JpZERpbWVuc2lvbnMgZGltZW5zaW9ucyA9IDE7XG4gKiBAcmV0dXJuIHs/cHJvdG8uc2ltX3NlcnZlci5HcmlkRGltZW5zaW9uc31cbiAqL1xucHJvdG8uc2ltX3NlcnZlci5Jbml0aWFsaXplUmVxdWVzdC5wcm90b3R5cGUuZ2V0RGltZW5zaW9ucyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gLyoqIEB0eXBlez9wcm90by5zaW1fc2VydmVyLkdyaWREaW1lbnNpb25zfSAqLyAoXG4gICAganNwYi5NZXNzYWdlLmdldFdyYXBwZXJGaWVsZCh0aGlzLCBwcm90by5zaW1fc2VydmVyLkdyaWREaW1lbnNpb25zLCAxKSk7XG59O1xuXG5cbi8qKlxuICogQHBhcmFtIHs/cHJvdG8uc2ltX3NlcnZlci5HcmlkRGltZW5zaW9uc3x1bmRlZmluZWR9IHZhbHVlXG4gKiBAcmV0dXJuIHshcHJvdG8uc2ltX3NlcnZlci5Jbml0aWFsaXplUmVxdWVzdH0gcmV0dXJucyB0aGlzXG4qL1xucHJvdG8uc2ltX3NlcnZlci5Jbml0aWFsaXplUmVxdWVzdC5wcm90b3R5cGUuc2V0RGltZW5zaW9ucyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0V3JhcHBlckZpZWxkKHRoaXMsIDEsIHZhbHVlKTtcbn07XG5cblxuLyoqXG4gKiBDbGVhcnMgdGhlIG1lc3NhZ2UgZmllbGQgbWFraW5nIGl0IHVuZGVmaW5lZC5cbiAqIEByZXR1cm4geyFwcm90by5zaW1fc2VydmVyLkluaXRpYWxpemVSZXF1ZXN0fSByZXR1cm5zIHRoaXNcbiAqL1xucHJvdG8uc2ltX3NlcnZlci5Jbml0aWFsaXplUmVxdWVzdC5wcm90b3R5cGUuY2xlYXJEaW1lbnNpb25zID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLnNldERpbWVuc2lvbnModW5kZWZpbmVkKTtcbn07XG5cblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhpcyBmaWVsZCBpcyBzZXQuXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5wcm90by5zaW1fc2VydmVyLkluaXRpYWxpemVSZXF1ZXN0LnByb3RvdHlwZS5oYXNEaW1lbnNpb25zID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGQodGhpcywgMSkgIT0gbnVsbDtcbn07XG5cblxuXG5cblxuaWYgKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1QpIHtcbi8qKlxuICogQ3JlYXRlcyBhbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBwcm90by5cbiAqIEZpZWxkIG5hbWVzIHRoYXQgYXJlIHJlc2VydmVkIGluIEphdmFTY3JpcHQgYW5kIHdpbGwgYmUgcmVuYW1lZCB0byBwYl9uYW1lLlxuICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLlxuICogVG8gYWNjZXNzIGEgcmVzZXJ2ZWQgZmllbGQgdXNlLCBmb28ucGJfPG5hbWU+LCBlZywgZm9vLnBiX2RlZmF1bHQuXG4gKiBGb3IgdGhlIGxpc3Qgb2YgcmVzZXJ2ZWQgbmFtZXMgcGxlYXNlIHNlZTpcbiAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gd2hldGhlciB0byBpbmNsdWRlIHRoZVxuICogICAgIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDpcbiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uXG4gKiBAcmV0dXJuIHshT2JqZWN0fVxuICovXG5wcm90by5zaW1fc2VydmVyLlN0ZXBSZXF1ZXN0LnByb3RvdHlwZS50b09iamVjdCA9IGZ1bmN0aW9uKG9wdF9pbmNsdWRlSW5zdGFuY2UpIHtcbiAgcmV0dXJuIHByb3RvLnNpbV9zZXJ2ZXIuU3RlcFJlcXVlc3QudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSwgdGhpcyk7XG59O1xuXG5cbi8qKlxuICogU3RhdGljIHZlcnNpb24gb2YgdGhlIHtAc2VlIHRvT2JqZWN0fSBtZXRob2QuXG4gKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlXG4gKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDpcbiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uXG4gKiBAcGFyYW0geyFwcm90by5zaW1fc2VydmVyLlN0ZXBSZXF1ZXN0fSBtc2cgVGhlIG1zZyBpbnN0YW5jZSB0byB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJuIHshT2JqZWN0fVxuICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlc1xuICovXG5wcm90by5zaW1fc2VydmVyLlN0ZXBSZXF1ZXN0LnRvT2JqZWN0ID0gZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLCBtc2cpIHtcbiAgdmFyIGYsIG9iaiA9IHtcbiAgICB3b3JsZFN0YXRlSWQ6IGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywgMSwgMCksXG4gICAgcnVsZTogbXNnLmdldFJ1bGVfYXNCNjQoKSxcbiAgICBudW1TdGVwczoganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCAzLCAwKVxuICB9O1xuXG4gIGlmIChpbmNsdWRlSW5zdGFuY2UpIHtcbiAgICBvYmouJGpzcGJNZXNzYWdlSW5zdGFuY2UgPSBtc2c7XG4gIH1cbiAgcmV0dXJuIG9iajtcbn07XG59XG5cblxuLyoqXG4gKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS5cbiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuXG4gKiBAcmV0dXJuIHshcHJvdG8uc2ltX3NlcnZlci5TdGVwUmVxdWVzdH1cbiAqL1xucHJvdG8uc2ltX3NlcnZlci5TdGVwUmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeSA9IGZ1bmN0aW9uKGJ5dGVzKSB7XG4gIHZhciByZWFkZXIgPSBuZXcganNwYi5CaW5hcnlSZWFkZXIoYnl0ZXMpO1xuICB2YXIgbXNnID0gbmV3IHByb3RvLnNpbV9zZXJ2ZXIuU3RlcFJlcXVlc3Q7XG4gIHJldHVybiBwcm90by5zaW1fc2VydmVyLlN0ZXBSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcihtc2csIHJlYWRlcik7XG59O1xuXG5cbi8qKlxuICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkgZnJvbSB0aGVcbiAqIGdpdmVuIHJlYWRlciBpbnRvIHRoZSBnaXZlbiBtZXNzYWdlIG9iamVjdC5cbiAqIEBwYXJhbSB7IXByb3RvLnNpbV9zZXJ2ZXIuU3RlcFJlcXVlc3R9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by5cbiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5UmVhZGVyfSByZWFkZXIgVGhlIEJpbmFyeVJlYWRlciB0byB1c2UuXG4gKiBAcmV0dXJuIHshcHJvdG8uc2ltX3NlcnZlci5TdGVwUmVxdWVzdH1cbiAqL1xucHJvdG8uc2ltX3NlcnZlci5TdGVwUmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIgPSBmdW5jdGlvbihtc2csIHJlYWRlcikge1xuICB3aGlsZSAocmVhZGVyLm5leHRGaWVsZCgpKSB7XG4gICAgaWYgKHJlYWRlci5pc0VuZEdyb3VwKCkpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICB2YXIgZmllbGQgPSByZWFkZXIuZ2V0RmllbGROdW1iZXIoKTtcbiAgICBzd2l0Y2ggKGZpZWxkKSB7XG4gICAgY2FzZSAxOlxuICAgICAgdmFyIHZhbHVlID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChyZWFkZXIucmVhZEludDY0KCkpO1xuICAgICAgbXNnLnNldFdvcmxkU3RhdGVJZCh2YWx1ZSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDI6XG4gICAgICB2YXIgdmFsdWUgPSAvKiogQHR5cGUgeyFVaW50OEFycmF5fSAqLyAocmVhZGVyLnJlYWRCeXRlcygpKTtcbiAgICAgIG1zZy5zZXRSdWxlKHZhbHVlKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMzpcbiAgICAgIHZhciB2YWx1ZSA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAocmVhZGVyLnJlYWRJbnQ2NCgpKTtcbiAgICAgIG1zZy5zZXROdW1TdGVwcyh2YWx1ZSk7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgcmVhZGVyLnNraXBGaWVsZCgpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiBtc2c7XG59O1xuXG5cbi8qKlxuICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLlxuICogQHJldHVybiB7IVVpbnQ4QXJyYXl9XG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuU3RlcFJlcXVlc3QucHJvdG90eXBlLnNlcmlhbGl6ZUJpbmFyeSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgd3JpdGVyID0gbmV3IGpzcGIuQmluYXJ5V3JpdGVyKCk7XG4gIHByb3RvLnNpbV9zZXJ2ZXIuU3RlcFJlcXVlc3Quc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIodGhpcywgd3JpdGVyKTtcbiAgcmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTtcbn07XG5cblxuLyoqXG4gKiBTZXJpYWxpemVzIHRoZSBnaXZlbiBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlXG4gKiBmb3JtYXQpLCB3cml0aW5nIHRvIHRoZSBnaXZlbiBCaW5hcnlXcml0ZXIuXG4gKiBAcGFyYW0geyFwcm90by5zaW1fc2VydmVyLlN0ZXBSZXF1ZXN0fSBtZXNzYWdlXG4gKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyXG4gKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzXG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuU3RlcFJlcXVlc3Quc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIgPSBmdW5jdGlvbihtZXNzYWdlLCB3cml0ZXIpIHtcbiAgdmFyIGYgPSB1bmRlZmluZWQ7XG4gIGYgPSBtZXNzYWdlLmdldFdvcmxkU3RhdGVJZCgpO1xuICBpZiAoZiAhPT0gMCkge1xuICAgIHdyaXRlci53cml0ZUludDY0KFxuICAgICAgMSxcbiAgICAgIGZcbiAgICApO1xuICB9XG4gIGYgPSBtZXNzYWdlLmdldFJ1bGVfYXNVOCgpO1xuICBpZiAoZi5sZW5ndGggPiAwKSB7XG4gICAgd3JpdGVyLndyaXRlQnl0ZXMoXG4gICAgICAyLFxuICAgICAgZlxuICAgICk7XG4gIH1cbiAgZiA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoanNwYi5NZXNzYWdlLmdldEZpZWxkKG1lc3NhZ2UsIDMpKTtcbiAgaWYgKGYgIT0gbnVsbCkge1xuICAgIHdyaXRlci53cml0ZUludDY0KFxuICAgICAgMyxcbiAgICAgIGZcbiAgICApO1xuICB9XG59O1xuXG5cbi8qKlxuICogb3B0aW9uYWwgaW50NjQgd29ybGRfc3RhdGVfaWQgPSAxO1xuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5wcm90by5zaW1fc2VydmVyLlN0ZXBSZXF1ZXN0LnByb3RvdHlwZS5nZXRXb3JsZFN0YXRlSWQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoanNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgMSwgMCkpO1xufTtcblxuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICogQHJldHVybiB7IXByb3RvLnNpbV9zZXJ2ZXIuU3RlcFJlcXVlc3R9IHJldHVybnMgdGhpc1xuICovXG5wcm90by5zaW1fc2VydmVyLlN0ZXBSZXF1ZXN0LnByb3RvdHlwZS5zZXRXb3JsZFN0YXRlSWQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsIDEsIHZhbHVlKTtcbn07XG5cblxuLyoqXG4gKiBvcHRpb25hbCBieXRlcyBydWxlID0gMjtcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xucHJvdG8uc2ltX3NlcnZlci5TdGVwUmVxdWVzdC5wcm90b3R5cGUuZ2V0UnVsZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gLyoqIEB0eXBlIHtzdHJpbmd9ICovIChqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCAyLCBcIlwiKSk7XG59O1xuXG5cbi8qKlxuICogb3B0aW9uYWwgYnl0ZXMgcnVsZSA9IDI7XG4gKiBUaGlzIGlzIGEgdHlwZS1jb252ZXJzaW9uIHdyYXBwZXIgYXJvdW5kIGBnZXRSdWxlKClgXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuU3RlcFJlcXVlc3QucHJvdG90eXBlLmdldFJ1bGVfYXNCNjQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAoanNwYi5NZXNzYWdlLmJ5dGVzQXNCNjQoXG4gICAgICB0aGlzLmdldFJ1bGUoKSkpO1xufTtcblxuXG4vKipcbiAqIG9wdGlvbmFsIGJ5dGVzIHJ1bGUgPSAyO1xuICogTm90ZSB0aGF0IFVpbnQ4QXJyYXkgaXMgbm90IHN1cHBvcnRlZCBvbiBhbGwgYnJvd3NlcnMuXG4gKiBAc2VlIGh0dHA6Ly9jYW5pdXNlLmNvbS9VaW50OEFycmF5XG4gKiBUaGlzIGlzIGEgdHlwZS1jb252ZXJzaW9uIHdyYXBwZXIgYXJvdW5kIGBnZXRSdWxlKClgXG4gKiBAcmV0dXJuIHshVWludDhBcnJheX1cbiAqL1xucHJvdG8uc2ltX3NlcnZlci5TdGVwUmVxdWVzdC5wcm90b3R5cGUuZ2V0UnVsZV9hc1U4ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiAvKiogQHR5cGUgeyFVaW50OEFycmF5fSAqLyAoanNwYi5NZXNzYWdlLmJ5dGVzQXNVOChcbiAgICAgIHRoaXMuZ2V0UnVsZSgpKSk7XG59O1xuXG5cbi8qKlxuICogQHBhcmFtIHshKHN0cmluZ3xVaW50OEFycmF5KX0gdmFsdWVcbiAqIEByZXR1cm4geyFwcm90by5zaW1fc2VydmVyLlN0ZXBSZXF1ZXN0fSByZXR1cm5zIHRoaXNcbiAqL1xucHJvdG8uc2ltX3NlcnZlci5TdGVwUmVxdWVzdC5wcm90b3R5cGUuc2V0UnVsZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zQnl0ZXNGaWVsZCh0aGlzLCAyLCB2YWx1ZSk7XG59O1xuXG5cbi8qKlxuICogb3B0aW9uYWwgaW50NjQgbnVtX3N0ZXBzID0gMztcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xucHJvdG8uc2ltX3NlcnZlci5TdGVwUmVxdWVzdC5wcm90b3R5cGUuZ2V0TnVtU3RlcHMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoanNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgMywgMCkpO1xufTtcblxuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICogQHJldHVybiB7IXByb3RvLnNpbV9zZXJ2ZXIuU3RlcFJlcXVlc3R9IHJldHVybnMgdGhpc1xuICovXG5wcm90by5zaW1fc2VydmVyLlN0ZXBSZXF1ZXN0LnByb3RvdHlwZS5zZXROdW1TdGVwcyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0RmllbGQodGhpcywgMywgdmFsdWUpO1xufTtcblxuXG4vKipcbiAqIENsZWFycyB0aGUgZmllbGQgbWFraW5nIGl0IHVuZGVmaW5lZC5cbiAqIEByZXR1cm4geyFwcm90by5zaW1fc2VydmVyLlN0ZXBSZXF1ZXN0fSByZXR1cm5zIHRoaXNcbiAqL1xucHJvdG8uc2ltX3NlcnZlci5TdGVwUmVxdWVzdC5wcm90b3R5cGUuY2xlYXJOdW1TdGVwcyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ganNwYi5NZXNzYWdlLnNldEZpZWxkKHRoaXMsIDMsIHVuZGVmaW5lZCk7XG59O1xuXG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoaXMgZmllbGQgaXMgc2V0LlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xucHJvdG8uc2ltX3NlcnZlci5TdGVwUmVxdWVzdC5wcm90b3R5cGUuaGFzTnVtU3RlcHMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZCh0aGlzLCAzKSAhPSBudWxsO1xufTtcblxuXG5cblxuXG5pZiAoanNwYi5NZXNzYWdlLkdFTkVSQVRFX1RPX09CSkVDVCkge1xuLyoqXG4gKiBDcmVhdGVzIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHByb3RvLlxuICogRmllbGQgbmFtZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgaW4gSmF2YVNjcmlwdCBhbmQgd2lsbCBiZSByZW5hbWVkIHRvIHBiX25hbWUuXG4gKiBPcHRpb25hbCBmaWVsZHMgdGhhdCBhcmUgbm90IHNldCB3aWxsIGJlIHNldCB0byB1bmRlZmluZWQuXG4gKiBUbyBhY2Nlc3MgYSByZXNlcnZlZCBmaWVsZCB1c2UsIGZvby5wYl88bmFtZT4sIGVnLCBmb28ucGJfZGVmYXVsdC5cbiAqIEZvciB0aGUgbGlzdCBvZiByZXNlcnZlZCBuYW1lcyBwbGVhc2Ugc2VlOlxuICogICAgIG5ldC9wcm90bzIvY29tcGlsZXIvanMvaW50ZXJuYWwvZ2VuZXJhdG9yLmNjI2tLZXl3b3JkLlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiB3aGV0aGVyIHRvIGluY2x1ZGUgdGhlXG4gKiAgICAgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OlxuICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb25cbiAqIEByZXR1cm4geyFPYmplY3R9XG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuV29ybGRTdGF0ZVJlc3BvbnNlLnByb3RvdHlwZS50b09iamVjdCA9IGZ1bmN0aW9uKG9wdF9pbmNsdWRlSW5zdGFuY2UpIHtcbiAgcmV0dXJuIHByb3RvLnNpbV9zZXJ2ZXIuV29ybGRTdGF0ZVJlc3BvbnNlLnRvT2JqZWN0KG9wdF9pbmNsdWRlSW5zdGFuY2UsIHRoaXMpO1xufTtcblxuXG4vKipcbiAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLlxuICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIFdoZXRoZXIgdG8gaW5jbHVkZVxuICogICAgIHRoZSBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6XG4gKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvblxuICogQHBhcmFtIHshcHJvdG8uc2ltX3NlcnZlci5Xb3JsZFN0YXRlUmVzcG9uc2V9IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS5cbiAqIEByZXR1cm4geyFPYmplY3R9XG4gKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzXG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuV29ybGRTdGF0ZVJlc3BvbnNlLnRvT2JqZWN0ID0gZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLCBtc2cpIHtcbiAgdmFyIGYsIG9iaiA9IHtcbiAgICBtZXRhZGF0YTogKGYgPSBtc2cuZ2V0TWV0YWRhdGEoKSkgJiYgcHJvdG8uc2ltX3NlcnZlci5NZXRhZGF0YS50b09iamVjdChpbmNsdWRlSW5zdGFuY2UsIGYpLFxuICAgIHN0YXRlOiAoZiA9IG1zZy5nZXRTdGF0ZSgpKSAmJiBwcm90by5zaW1fc2VydmVyLlZlY3RvcjNELnRvT2JqZWN0KGluY2x1ZGVJbnN0YW5jZSwgZilcbiAgfTtcblxuICBpZiAoaW5jbHVkZUluc3RhbmNlKSB7XG4gICAgb2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlID0gbXNnO1xuICB9XG4gIHJldHVybiBvYmo7XG59O1xufVxuXG5cbi8qKlxuICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuXG4gKiBAcGFyYW0ge2pzcGIuQnl0ZVNvdXJjZX0gYnl0ZXMgVGhlIGJ5dGVzIHRvIGRlc2VyaWFsaXplLlxuICogQHJldHVybiB7IXByb3RvLnNpbV9zZXJ2ZXIuV29ybGRTdGF0ZVJlc3BvbnNlfVxuICovXG5wcm90by5zaW1fc2VydmVyLldvcmxkU3RhdGVSZXNwb25zZS5kZXNlcmlhbGl6ZUJpbmFyeSA9IGZ1bmN0aW9uKGJ5dGVzKSB7XG4gIHZhciByZWFkZXIgPSBuZXcganNwYi5CaW5hcnlSZWFkZXIoYnl0ZXMpO1xuICB2YXIgbXNnID0gbmV3IHByb3RvLnNpbV9zZXJ2ZXIuV29ybGRTdGF0ZVJlc3BvbnNlO1xuICByZXR1cm4gcHJvdG8uc2ltX3NlcnZlci5Xb3JsZFN0YXRlUmVzcG9uc2UuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZywgcmVhZGVyKTtcbn07XG5cblxuLyoqXG4gKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZVxuICogZ2l2ZW4gcmVhZGVyIGludG8gdGhlIGdpdmVuIG1lc3NhZ2Ugb2JqZWN0LlxuICogQHBhcmFtIHshcHJvdG8uc2ltX3NlcnZlci5Xb3JsZFN0YXRlUmVzcG9uc2V9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by5cbiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5UmVhZGVyfSByZWFkZXIgVGhlIEJpbmFyeVJlYWRlciB0byB1c2UuXG4gKiBAcmV0dXJuIHshcHJvdG8uc2ltX3NlcnZlci5Xb3JsZFN0YXRlUmVzcG9uc2V9XG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuV29ybGRTdGF0ZVJlc3BvbnNlLmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlciA9IGZ1bmN0aW9uKG1zZywgcmVhZGVyKSB7XG4gIHdoaWxlIChyZWFkZXIubmV4dEZpZWxkKCkpIHtcbiAgICBpZiAocmVhZGVyLmlzRW5kR3JvdXAoKSkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHZhciBmaWVsZCA9IHJlYWRlci5nZXRGaWVsZE51bWJlcigpO1xuICAgIHN3aXRjaCAoZmllbGQpIHtcbiAgICBjYXNlIDE6XG4gICAgICB2YXIgdmFsdWUgPSBuZXcgcHJvdG8uc2ltX3NlcnZlci5NZXRhZGF0YTtcbiAgICAgIHJlYWRlci5yZWFkTWVzc2FnZSh2YWx1ZSxwcm90by5zaW1fc2VydmVyLk1ldGFkYXRhLmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcik7XG4gICAgICBtc2cuc2V0TWV0YWRhdGEodmFsdWUpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAyOlxuICAgICAgdmFyIHZhbHVlID0gbmV3IHByb3RvLnNpbV9zZXJ2ZXIuVmVjdG9yM0Q7XG4gICAgICByZWFkZXIucmVhZE1lc3NhZ2UodmFsdWUscHJvdG8uc2ltX3NlcnZlci5WZWN0b3IzRC5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIpO1xuICAgICAgbXNnLnNldFN0YXRlKHZhbHVlKTtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZWFkZXIuc2tpcEZpZWxkKCk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG1zZztcbn07XG5cblxuLyoqXG4gKiBTZXJpYWxpemVzIHRoZSBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuXG4gKiBAcmV0dXJuIHshVWludDhBcnJheX1cbiAqL1xucHJvdG8uc2ltX3NlcnZlci5Xb3JsZFN0YXRlUmVzcG9uc2UucHJvdG90eXBlLnNlcmlhbGl6ZUJpbmFyeSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgd3JpdGVyID0gbmV3IGpzcGIuQmluYXJ5V3JpdGVyKCk7XG4gIHByb3RvLnNpbV9zZXJ2ZXIuV29ybGRTdGF0ZVJlc3BvbnNlLnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsIHdyaXRlcik7XG4gIHJldHVybiB3cml0ZXIuZ2V0UmVzdWx0QnVmZmVyKCk7XG59O1xuXG5cbi8qKlxuICogU2VyaWFsaXplcyB0aGUgZ2l2ZW4gbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZVxuICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLlxuICogQHBhcmFtIHshcHJvdG8uc2ltX3NlcnZlci5Xb3JsZFN0YXRlUmVzcG9uc2V9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5V3JpdGVyfSB3cml0ZXJcbiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXNcbiAqL1xucHJvdG8uc2ltX3NlcnZlci5Xb3JsZFN0YXRlUmVzcG9uc2Uuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIgPSBmdW5jdGlvbihtZXNzYWdlLCB3cml0ZXIpIHtcbiAgdmFyIGYgPSB1bmRlZmluZWQ7XG4gIGYgPSBtZXNzYWdlLmdldE1ldGFkYXRhKCk7XG4gIGlmIChmICE9IG51bGwpIHtcbiAgICB3cml0ZXIud3JpdGVNZXNzYWdlKFxuICAgICAgMSxcbiAgICAgIGYsXG4gICAgICBwcm90by5zaW1fc2VydmVyLk1ldGFkYXRhLnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyXG4gICAgKTtcbiAgfVxuICBmID0gbWVzc2FnZS5nZXRTdGF0ZSgpO1xuICBpZiAoZiAhPSBudWxsKSB7XG4gICAgd3JpdGVyLndyaXRlTWVzc2FnZShcbiAgICAgIDIsXG4gICAgICBmLFxuICAgICAgcHJvdG8uc2ltX3NlcnZlci5WZWN0b3IzRC5zZXJpYWxpemVCaW5hcnlUb1dyaXRlclxuICAgICk7XG4gIH1cbn07XG5cblxuLyoqXG4gKiBvcHRpb25hbCBNZXRhZGF0YSBtZXRhZGF0YSA9IDE7XG4gKiBAcmV0dXJuIHs/cHJvdG8uc2ltX3NlcnZlci5NZXRhZGF0YX1cbiAqL1xucHJvdG8uc2ltX3NlcnZlci5Xb3JsZFN0YXRlUmVzcG9uc2UucHJvdG90eXBlLmdldE1ldGFkYXRhID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiAvKiogQHR5cGV7P3Byb3RvLnNpbV9zZXJ2ZXIuTWV0YWRhdGF9ICovIChcbiAgICBqc3BiLk1lc3NhZ2UuZ2V0V3JhcHBlckZpZWxkKHRoaXMsIHByb3RvLnNpbV9zZXJ2ZXIuTWV0YWRhdGEsIDEpKTtcbn07XG5cblxuLyoqXG4gKiBAcGFyYW0gez9wcm90by5zaW1fc2VydmVyLk1ldGFkYXRhfHVuZGVmaW5lZH0gdmFsdWVcbiAqIEByZXR1cm4geyFwcm90by5zaW1fc2VydmVyLldvcmxkU3RhdGVSZXNwb25zZX0gcmV0dXJucyB0aGlzXG4qL1xucHJvdG8uc2ltX3NlcnZlci5Xb3JsZFN0YXRlUmVzcG9uc2UucHJvdG90eXBlLnNldE1ldGFkYXRhID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRXcmFwcGVyRmllbGQodGhpcywgMSwgdmFsdWUpO1xufTtcblxuXG4vKipcbiAqIENsZWFycyB0aGUgbWVzc2FnZSBmaWVsZCBtYWtpbmcgaXQgdW5kZWZpbmVkLlxuICogQHJldHVybiB7IXByb3RvLnNpbV9zZXJ2ZXIuV29ybGRTdGF0ZVJlc3BvbnNlfSByZXR1cm5zIHRoaXNcbiAqL1xucHJvdG8uc2ltX3NlcnZlci5Xb3JsZFN0YXRlUmVzcG9uc2UucHJvdG90eXBlLmNsZWFyTWV0YWRhdGEgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuc2V0TWV0YWRhdGEodW5kZWZpbmVkKTtcbn07XG5cblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhpcyBmaWVsZCBpcyBzZXQuXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5wcm90by5zaW1fc2VydmVyLldvcmxkU3RhdGVSZXNwb25zZS5wcm90b3R5cGUuaGFzTWV0YWRhdGEgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZCh0aGlzLCAxKSAhPSBudWxsO1xufTtcblxuXG4vKipcbiAqIG9wdGlvbmFsIFZlY3RvcjNEIHN0YXRlID0gMjtcbiAqIEByZXR1cm4gez9wcm90by5zaW1fc2VydmVyLlZlY3RvcjNEfVxuICovXG5wcm90by5zaW1fc2VydmVyLldvcmxkU3RhdGVSZXNwb25zZS5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIC8qKiBAdHlwZXs/cHJvdG8uc2ltX3NlcnZlci5WZWN0b3IzRH0gKi8gKFxuICAgIGpzcGIuTWVzc2FnZS5nZXRXcmFwcGVyRmllbGQodGhpcywgcHJvdG8uc2ltX3NlcnZlci5WZWN0b3IzRCwgMikpO1xufTtcblxuXG4vKipcbiAqIEBwYXJhbSB7P3Byb3RvLnNpbV9zZXJ2ZXIuVmVjdG9yM0R8dW5kZWZpbmVkfSB2YWx1ZVxuICogQHJldHVybiB7IXByb3RvLnNpbV9zZXJ2ZXIuV29ybGRTdGF0ZVJlc3BvbnNlfSByZXR1cm5zIHRoaXNcbiovXG5wcm90by5zaW1fc2VydmVyLldvcmxkU3RhdGVSZXNwb25zZS5wcm90b3R5cGUuc2V0U3RhdGUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFdyYXBwZXJGaWVsZCh0aGlzLCAyLCB2YWx1ZSk7XG59O1xuXG5cbi8qKlxuICogQ2xlYXJzIHRoZSBtZXNzYWdlIGZpZWxkIG1ha2luZyBpdCB1bmRlZmluZWQuXG4gKiBAcmV0dXJuIHshcHJvdG8uc2ltX3NlcnZlci5Xb3JsZFN0YXRlUmVzcG9uc2V9IHJldHVybnMgdGhpc1xuICovXG5wcm90by5zaW1fc2VydmVyLldvcmxkU3RhdGVSZXNwb25zZS5wcm90b3R5cGUuY2xlYXJTdGF0ZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5zZXRTdGF0ZSh1bmRlZmluZWQpO1xufTtcblxuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciB0aGlzIGZpZWxkIGlzIHNldC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuV29ybGRTdGF0ZVJlc3BvbnNlLnByb3RvdHlwZS5oYXNTdGF0ZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkKHRoaXMsIDIpICE9IG51bGw7XG59O1xuXG5cblxuXG5cbmlmIChqc3BiLk1lc3NhZ2UuR0VORVJBVEVfVE9fT0JKRUNUKSB7XG4vKipcbiAqIENyZWF0ZXMgYW4gb2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcHJvdG8uXG4gKiBGaWVsZCBuYW1lcyB0aGF0IGFyZSByZXNlcnZlZCBpbiBKYXZhU2NyaXB0IGFuZCB3aWxsIGJlIHJlbmFtZWQgdG8gcGJfbmFtZS5cbiAqIE9wdGlvbmFsIGZpZWxkcyB0aGF0IGFyZSBub3Qgc2V0IHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC5cbiAqIFRvIGFjY2VzcyBhIHJlc2VydmVkIGZpZWxkIHVzZSwgZm9vLnBiXzxuYW1lPiwgZWcsIGZvby5wYl9kZWZhdWx0LlxuICogRm9yIHRoZSBsaXN0IG9mIHJlc2VydmVkIG5hbWVzIHBsZWFzZSBzZWU6XG4gKiAgICAgbmV0L3Byb3RvMi9jb21waWxlci9qcy9pbnRlcm5hbC9nZW5lcmF0b3IuY2Mja0tleXdvcmQuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIHdoZXRoZXIgdG8gaW5jbHVkZSB0aGVcbiAqICAgICBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6XG4gKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvblxuICogQHJldHVybiB7IU9iamVjdH1cbiAqL1xucHJvdG8uc2ltX3NlcnZlci5TdGFydFNpbXVsYXRpb25SZXF1ZXN0LnByb3RvdHlwZS50b09iamVjdCA9IGZ1bmN0aW9uKG9wdF9pbmNsdWRlSW5zdGFuY2UpIHtcbiAgcmV0dXJuIHByb3RvLnNpbV9zZXJ2ZXIuU3RhcnRTaW11bGF0aW9uUmVxdWVzdC50b09iamVjdChvcHRfaW5jbHVkZUluc3RhbmNlLCB0aGlzKTtcbn07XG5cblxuLyoqXG4gKiBTdGF0aWMgdmVyc2lvbiBvZiB0aGUge0BzZWUgdG9PYmplY3R9IG1ldGhvZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbnx1bmRlZmluZWR9IGluY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiBXaGV0aGVyIHRvIGluY2x1ZGVcbiAqICAgICB0aGUgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OlxuICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb25cbiAqIEBwYXJhbSB7IXByb3RvLnNpbV9zZXJ2ZXIuU3RhcnRTaW11bGF0aW9uUmVxdWVzdH0gbXNnIFRoZSBtc2cgaW5zdGFuY2UgdG8gdHJhbnNmb3JtLlxuICogQHJldHVybiB7IU9iamVjdH1cbiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXNcbiAqL1xucHJvdG8uc2ltX3NlcnZlci5TdGFydFNpbXVsYXRpb25SZXF1ZXN0LnRvT2JqZWN0ID0gZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLCBtc2cpIHtcbiAgdmFyIGYsIG9iaiA9IHtcbiAgICBpbml0UmVxOiAoZiA9IG1zZy5nZXRJbml0UmVxKCkpICYmIHByb3RvLnNpbV9zZXJ2ZXIuSW5pdGlhbGl6ZVJlcXVlc3QudG9PYmplY3QoaW5jbHVkZUluc3RhbmNlLCBmKSxcbiAgICBzdGVwUmVxOiAoZiA9IG1zZy5nZXRTdGVwUmVxKCkpICYmIHByb3RvLnNpbV9zZXJ2ZXIuU3RlcFJlcXVlc3QudG9PYmplY3QoaW5jbHVkZUluc3RhbmNlLCBmKSxcbiAgICB0aW1lb3V0OiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csIDMsIDApXG4gIH07XG5cbiAgaWYgKGluY2x1ZGVJbnN0YW5jZSkge1xuICAgIG9iai4kanNwYk1lc3NhZ2VJbnN0YW5jZSA9IG1zZztcbiAgfVxuICByZXR1cm4gb2JqO1xufTtcbn1cblxuXG4vKipcbiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLlxuICogQHBhcmFtIHtqc3BiLkJ5dGVTb3VyY2V9IGJ5dGVzIFRoZSBieXRlcyB0byBkZXNlcmlhbGl6ZS5cbiAqIEByZXR1cm4geyFwcm90by5zaW1fc2VydmVyLlN0YXJ0U2ltdWxhdGlvblJlcXVlc3R9XG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuU3RhcnRTaW11bGF0aW9uUmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeSA9IGZ1bmN0aW9uKGJ5dGVzKSB7XG4gIHZhciByZWFkZXIgPSBuZXcganNwYi5CaW5hcnlSZWFkZXIoYnl0ZXMpO1xuICB2YXIgbXNnID0gbmV3IHByb3RvLnNpbV9zZXJ2ZXIuU3RhcnRTaW11bGF0aW9uUmVxdWVzdDtcbiAgcmV0dXJuIHByb3RvLnNpbV9zZXJ2ZXIuU3RhcnRTaW11bGF0aW9uUmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIobXNnLCByZWFkZXIpO1xufTtcblxuXG4vKipcbiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpIGZyb20gdGhlXG4gKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuXG4gKiBAcGFyYW0geyFwcm90by5zaW1fc2VydmVyLlN0YXJ0U2ltdWxhdGlvblJlcXVlc3R9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by5cbiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5UmVhZGVyfSByZWFkZXIgVGhlIEJpbmFyeVJlYWRlciB0byB1c2UuXG4gKiBAcmV0dXJuIHshcHJvdG8uc2ltX3NlcnZlci5TdGFydFNpbXVsYXRpb25SZXF1ZXN0fVxuICovXG5wcm90by5zaW1fc2VydmVyLlN0YXJ0U2ltdWxhdGlvblJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyID0gZnVuY3Rpb24obXNnLCByZWFkZXIpIHtcbiAgd2hpbGUgKHJlYWRlci5uZXh0RmllbGQoKSkge1xuICAgIGlmIChyZWFkZXIuaXNFbmRHcm91cCgpKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgdmFyIGZpZWxkID0gcmVhZGVyLmdldEZpZWxkTnVtYmVyKCk7XG4gICAgc3dpdGNoIChmaWVsZCkge1xuICAgIGNhc2UgMTpcbiAgICAgIHZhciB2YWx1ZSA9IG5ldyBwcm90by5zaW1fc2VydmVyLkluaXRpYWxpemVSZXF1ZXN0O1xuICAgICAgcmVhZGVyLnJlYWRNZXNzYWdlKHZhbHVlLHByb3RvLnNpbV9zZXJ2ZXIuSW5pdGlhbGl6ZVJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKTtcbiAgICAgIG1zZy5zZXRJbml0UmVxKHZhbHVlKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMjpcbiAgICAgIHZhciB2YWx1ZSA9IG5ldyBwcm90by5zaW1fc2VydmVyLlN0ZXBSZXF1ZXN0O1xuICAgICAgcmVhZGVyLnJlYWRNZXNzYWdlKHZhbHVlLHByb3RvLnNpbV9zZXJ2ZXIuU3RlcFJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKTtcbiAgICAgIG1zZy5zZXRTdGVwUmVxKHZhbHVlKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMzpcbiAgICAgIHZhciB2YWx1ZSA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAocmVhZGVyLnJlYWRJbnQ2NCgpKTtcbiAgICAgIG1zZy5zZXRUaW1lb3V0KHZhbHVlKTtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZWFkZXIuc2tpcEZpZWxkKCk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG1zZztcbn07XG5cblxuLyoqXG4gKiBTZXJpYWxpemVzIHRoZSBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuXG4gKiBAcmV0dXJuIHshVWludDhBcnJheX1cbiAqL1xucHJvdG8uc2ltX3NlcnZlci5TdGFydFNpbXVsYXRpb25SZXF1ZXN0LnByb3RvdHlwZS5zZXJpYWxpemVCaW5hcnkgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHdyaXRlciA9IG5ldyBqc3BiLkJpbmFyeVdyaXRlcigpO1xuICBwcm90by5zaW1fc2VydmVyLlN0YXJ0U2ltdWxhdGlvblJlcXVlc3Quc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIodGhpcywgd3JpdGVyKTtcbiAgcmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTtcbn07XG5cblxuLyoqXG4gKiBTZXJpYWxpemVzIHRoZSBnaXZlbiBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlXG4gKiBmb3JtYXQpLCB3cml0aW5nIHRvIHRoZSBnaXZlbiBCaW5hcnlXcml0ZXIuXG4gKiBAcGFyYW0geyFwcm90by5zaW1fc2VydmVyLlN0YXJ0U2ltdWxhdGlvblJlcXVlc3R9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5V3JpdGVyfSB3cml0ZXJcbiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXNcbiAqL1xucHJvdG8uc2ltX3NlcnZlci5TdGFydFNpbXVsYXRpb25SZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyID0gZnVuY3Rpb24obWVzc2FnZSwgd3JpdGVyKSB7XG4gIHZhciBmID0gdW5kZWZpbmVkO1xuICBmID0gbWVzc2FnZS5nZXRJbml0UmVxKCk7XG4gIGlmIChmICE9IG51bGwpIHtcbiAgICB3cml0ZXIud3JpdGVNZXNzYWdlKFxuICAgICAgMSxcbiAgICAgIGYsXG4gICAgICBwcm90by5zaW1fc2VydmVyLkluaXRpYWxpemVSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyXG4gICAgKTtcbiAgfVxuICBmID0gbWVzc2FnZS5nZXRTdGVwUmVxKCk7XG4gIGlmIChmICE9IG51bGwpIHtcbiAgICB3cml0ZXIud3JpdGVNZXNzYWdlKFxuICAgICAgMixcbiAgICAgIGYsXG4gICAgICBwcm90by5zaW1fc2VydmVyLlN0ZXBSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyXG4gICAgKTtcbiAgfVxuICBmID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChqc3BiLk1lc3NhZ2UuZ2V0RmllbGQobWVzc2FnZSwgMykpO1xuICBpZiAoZiAhPSBudWxsKSB7XG4gICAgd3JpdGVyLndyaXRlSW50NjQoXG4gICAgICAzLFxuICAgICAgZlxuICAgICk7XG4gIH1cbn07XG5cblxuLyoqXG4gKiBvcHRpb25hbCBJbml0aWFsaXplUmVxdWVzdCBpbml0X3JlcSA9IDE7XG4gKiBAcmV0dXJuIHs/cHJvdG8uc2ltX3NlcnZlci5Jbml0aWFsaXplUmVxdWVzdH1cbiAqL1xucHJvdG8uc2ltX3NlcnZlci5TdGFydFNpbXVsYXRpb25SZXF1ZXN0LnByb3RvdHlwZS5nZXRJbml0UmVxID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiAvKiogQHR5cGV7P3Byb3RvLnNpbV9zZXJ2ZXIuSW5pdGlhbGl6ZVJlcXVlc3R9ICovIChcbiAgICBqc3BiLk1lc3NhZ2UuZ2V0V3JhcHBlckZpZWxkKHRoaXMsIHByb3RvLnNpbV9zZXJ2ZXIuSW5pdGlhbGl6ZVJlcXVlc3QsIDEpKTtcbn07XG5cblxuLyoqXG4gKiBAcGFyYW0gez9wcm90by5zaW1fc2VydmVyLkluaXRpYWxpemVSZXF1ZXN0fHVuZGVmaW5lZH0gdmFsdWVcbiAqIEByZXR1cm4geyFwcm90by5zaW1fc2VydmVyLlN0YXJ0U2ltdWxhdGlvblJlcXVlc3R9IHJldHVybnMgdGhpc1xuKi9cbnByb3RvLnNpbV9zZXJ2ZXIuU3RhcnRTaW11bGF0aW9uUmVxdWVzdC5wcm90b3R5cGUuc2V0SW5pdFJlcSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0V3JhcHBlckZpZWxkKHRoaXMsIDEsIHZhbHVlKTtcbn07XG5cblxuLyoqXG4gKiBDbGVhcnMgdGhlIG1lc3NhZ2UgZmllbGQgbWFraW5nIGl0IHVuZGVmaW5lZC5cbiAqIEByZXR1cm4geyFwcm90by5zaW1fc2VydmVyLlN0YXJ0U2ltdWxhdGlvblJlcXVlc3R9IHJldHVybnMgdGhpc1xuICovXG5wcm90by5zaW1fc2VydmVyLlN0YXJ0U2ltdWxhdGlvblJlcXVlc3QucHJvdG90eXBlLmNsZWFySW5pdFJlcSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5zZXRJbml0UmVxKHVuZGVmaW5lZCk7XG59O1xuXG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoaXMgZmllbGQgaXMgc2V0LlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xucHJvdG8uc2ltX3NlcnZlci5TdGFydFNpbXVsYXRpb25SZXF1ZXN0LnByb3RvdHlwZS5oYXNJbml0UmVxID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGQodGhpcywgMSkgIT0gbnVsbDtcbn07XG5cblxuLyoqXG4gKiBvcHRpb25hbCBTdGVwUmVxdWVzdCBzdGVwX3JlcSA9IDI7XG4gKiBAcmV0dXJuIHs/cHJvdG8uc2ltX3NlcnZlci5TdGVwUmVxdWVzdH1cbiAqL1xucHJvdG8uc2ltX3NlcnZlci5TdGFydFNpbXVsYXRpb25SZXF1ZXN0LnByb3RvdHlwZS5nZXRTdGVwUmVxID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiAvKiogQHR5cGV7P3Byb3RvLnNpbV9zZXJ2ZXIuU3RlcFJlcXVlc3R9ICovIChcbiAgICBqc3BiLk1lc3NhZ2UuZ2V0V3JhcHBlckZpZWxkKHRoaXMsIHByb3RvLnNpbV9zZXJ2ZXIuU3RlcFJlcXVlc3QsIDIpKTtcbn07XG5cblxuLyoqXG4gKiBAcGFyYW0gez9wcm90by5zaW1fc2VydmVyLlN0ZXBSZXF1ZXN0fHVuZGVmaW5lZH0gdmFsdWVcbiAqIEByZXR1cm4geyFwcm90by5zaW1fc2VydmVyLlN0YXJ0U2ltdWxhdGlvblJlcXVlc3R9IHJldHVybnMgdGhpc1xuKi9cbnByb3RvLnNpbV9zZXJ2ZXIuU3RhcnRTaW11bGF0aW9uUmVxdWVzdC5wcm90b3R5cGUuc2V0U3RlcFJlcSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0V3JhcHBlckZpZWxkKHRoaXMsIDIsIHZhbHVlKTtcbn07XG5cblxuLyoqXG4gKiBDbGVhcnMgdGhlIG1lc3NhZ2UgZmllbGQgbWFraW5nIGl0IHVuZGVmaW5lZC5cbiAqIEByZXR1cm4geyFwcm90by5zaW1fc2VydmVyLlN0YXJ0U2ltdWxhdGlvblJlcXVlc3R9IHJldHVybnMgdGhpc1xuICovXG5wcm90by5zaW1fc2VydmVyLlN0YXJ0U2ltdWxhdGlvblJlcXVlc3QucHJvdG90eXBlLmNsZWFyU3RlcFJlcSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5zZXRTdGVwUmVxKHVuZGVmaW5lZCk7XG59O1xuXG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoaXMgZmllbGQgaXMgc2V0LlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xucHJvdG8uc2ltX3NlcnZlci5TdGFydFNpbXVsYXRpb25SZXF1ZXN0LnByb3RvdHlwZS5oYXNTdGVwUmVxID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGQodGhpcywgMikgIT0gbnVsbDtcbn07XG5cblxuLyoqXG4gKiBvcHRpb25hbCBpbnQ2NCB0aW1lb3V0ID0gMztcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xucHJvdG8uc2ltX3NlcnZlci5TdGFydFNpbXVsYXRpb25SZXF1ZXN0LnByb3RvdHlwZS5nZXRUaW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsIDMsIDApKTtcbn07XG5cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAqIEByZXR1cm4geyFwcm90by5zaW1fc2VydmVyLlN0YXJ0U2ltdWxhdGlvblJlcXVlc3R9IHJldHVybnMgdGhpc1xuICovXG5wcm90by5zaW1fc2VydmVyLlN0YXJ0U2ltdWxhdGlvblJlcXVlc3QucHJvdG90eXBlLnNldFRpbWVvdXQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4ganNwYi5NZXNzYWdlLnNldEZpZWxkKHRoaXMsIDMsIHZhbHVlKTtcbn07XG5cblxuLyoqXG4gKiBDbGVhcnMgdGhlIGZpZWxkIG1ha2luZyBpdCB1bmRlZmluZWQuXG4gKiBAcmV0dXJuIHshcHJvdG8uc2ltX3NlcnZlci5TdGFydFNpbXVsYXRpb25SZXF1ZXN0fSByZXR1cm5zIHRoaXNcbiAqL1xucHJvdG8uc2ltX3NlcnZlci5TdGFydFNpbXVsYXRpb25SZXF1ZXN0LnByb3RvdHlwZS5jbGVhclRpbWVvdXQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRGaWVsZCh0aGlzLCAzLCB1bmRlZmluZWQpO1xufTtcblxuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciB0aGlzIGZpZWxkIGlzIHNldC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuU3RhcnRTaW11bGF0aW9uUmVxdWVzdC5wcm90b3R5cGUuaGFzVGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkKHRoaXMsIDMpICE9IG51bGw7XG59O1xuXG5cblxuXG5cbmlmIChqc3BiLk1lc3NhZ2UuR0VORVJBVEVfVE9fT0JKRUNUKSB7XG4vKipcbiAqIENyZWF0ZXMgYW4gb2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcHJvdG8uXG4gKiBGaWVsZCBuYW1lcyB0aGF0IGFyZSByZXNlcnZlZCBpbiBKYXZhU2NyaXB0IGFuZCB3aWxsIGJlIHJlbmFtZWQgdG8gcGJfbmFtZS5cbiAqIE9wdGlvbmFsIGZpZWxkcyB0aGF0IGFyZSBub3Qgc2V0IHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC5cbiAqIFRvIGFjY2VzcyBhIHJlc2VydmVkIGZpZWxkIHVzZSwgZm9vLnBiXzxuYW1lPiwgZWcsIGZvby5wYl9kZWZhdWx0LlxuICogRm9yIHRoZSBsaXN0IG9mIHJlc2VydmVkIG5hbWVzIHBsZWFzZSBzZWU6XG4gKiAgICAgbmV0L3Byb3RvMi9jb21waWxlci9qcy9pbnRlcm5hbC9nZW5lcmF0b3IuY2Mja0tleXdvcmQuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIHdoZXRoZXIgdG8gaW5jbHVkZSB0aGVcbiAqICAgICBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6XG4gKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvblxuICogQHJldHVybiB7IU9iamVjdH1cbiAqL1xucHJvdG8uc2ltX3NlcnZlci5TaW11bGF0aW9uUmVzdWx0UmVzcG9uc2UucHJvdG90eXBlLnRvT2JqZWN0ID0gZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSkge1xuICByZXR1cm4gcHJvdG8uc2ltX3NlcnZlci5TaW11bGF0aW9uUmVzdWx0UmVzcG9uc2UudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSwgdGhpcyk7XG59O1xuXG5cbi8qKlxuICogU3RhdGljIHZlcnNpb24gb2YgdGhlIHtAc2VlIHRvT2JqZWN0fSBtZXRob2QuXG4gKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlXG4gKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDpcbiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uXG4gKiBAcGFyYW0geyFwcm90by5zaW1fc2VydmVyLlNpbXVsYXRpb25SZXN1bHRSZXNwb25zZX0gbXNnIFRoZSBtc2cgaW5zdGFuY2UgdG8gdHJhbnNmb3JtLlxuICogQHJldHVybiB7IU9iamVjdH1cbiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXNcbiAqL1xucHJvdG8uc2ltX3NlcnZlci5TaW11bGF0aW9uUmVzdWx0UmVzcG9uc2UudG9PYmplY3QgPSBmdW5jdGlvbihpbmNsdWRlSW5zdGFuY2UsIG1zZykge1xuICB2YXIgZiwgb2JqID0ge1xuICAgIHN0YXJ0U3RhdGU6IChmID0gbXNnLmdldFN0YXJ0U3RhdGUoKSkgJiYgcHJvdG8uc2ltX3NlcnZlci5Xb3JsZFN0YXRlUmVzcG9uc2UudG9PYmplY3QoaW5jbHVkZUluc3RhbmNlLCBmKSxcbiAgICBlbmRTdGF0ZTogKGYgPSBtc2cuZ2V0RW5kU3RhdGUoKSkgJiYgcHJvdG8uc2ltX3NlcnZlci5Xb3JsZFN0YXRlUmVzcG9uc2UudG9PYmplY3QoaW5jbHVkZUluc3RhbmNlLCBmKSxcbiAgICBzdGF0ZUNoYW5nZWREdXJpbmdTaW06IGpzcGIuTWVzc2FnZS5nZXRCb29sZWFuRmllbGRXaXRoRGVmYXVsdChtc2csIDMsIGZhbHNlKVxuICB9O1xuXG4gIGlmIChpbmNsdWRlSW5zdGFuY2UpIHtcbiAgICBvYmouJGpzcGJNZXNzYWdlSW5zdGFuY2UgPSBtc2c7XG4gIH1cbiAgcmV0dXJuIG9iajtcbn07XG59XG5cblxuLyoqXG4gKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS5cbiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuXG4gKiBAcmV0dXJuIHshcHJvdG8uc2ltX3NlcnZlci5TaW11bGF0aW9uUmVzdWx0UmVzcG9uc2V9XG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuU2ltdWxhdGlvblJlc3VsdFJlc3BvbnNlLmRlc2VyaWFsaXplQmluYXJ5ID0gZnVuY3Rpb24oYnl0ZXMpIHtcbiAgdmFyIHJlYWRlciA9IG5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7XG4gIHZhciBtc2cgPSBuZXcgcHJvdG8uc2ltX3NlcnZlci5TaW11bGF0aW9uUmVzdWx0UmVzcG9uc2U7XG4gIHJldHVybiBwcm90by5zaW1fc2VydmVyLlNpbXVsYXRpb25SZXN1bHRSZXNwb25zZS5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIobXNnLCByZWFkZXIpO1xufTtcblxuXG4vKipcbiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpIGZyb20gdGhlXG4gKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuXG4gKiBAcGFyYW0geyFwcm90by5zaW1fc2VydmVyLlNpbXVsYXRpb25SZXN1bHRSZXNwb25zZX0gbXNnIFRoZSBtZXNzYWdlIG9iamVjdCB0byBkZXNlcmlhbGl6ZSBpbnRvLlxuICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS5cbiAqIEByZXR1cm4geyFwcm90by5zaW1fc2VydmVyLlNpbXVsYXRpb25SZXN1bHRSZXNwb25zZX1cbiAqL1xucHJvdG8uc2ltX3NlcnZlci5TaW11bGF0aW9uUmVzdWx0UmVzcG9uc2UuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyID0gZnVuY3Rpb24obXNnLCByZWFkZXIpIHtcbiAgd2hpbGUgKHJlYWRlci5uZXh0RmllbGQoKSkge1xuICAgIGlmIChyZWFkZXIuaXNFbmRHcm91cCgpKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgdmFyIGZpZWxkID0gcmVhZGVyLmdldEZpZWxkTnVtYmVyKCk7XG4gICAgc3dpdGNoIChmaWVsZCkge1xuICAgIGNhc2UgMTpcbiAgICAgIHZhciB2YWx1ZSA9IG5ldyBwcm90by5zaW1fc2VydmVyLldvcmxkU3RhdGVSZXNwb25zZTtcbiAgICAgIHJlYWRlci5yZWFkTWVzc2FnZSh2YWx1ZSxwcm90by5zaW1fc2VydmVyLldvcmxkU3RhdGVSZXNwb25zZS5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIpO1xuICAgICAgbXNnLnNldFN0YXJ0U3RhdGUodmFsdWUpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAyOlxuICAgICAgdmFyIHZhbHVlID0gbmV3IHByb3RvLnNpbV9zZXJ2ZXIuV29ybGRTdGF0ZVJlc3BvbnNlO1xuICAgICAgcmVhZGVyLnJlYWRNZXNzYWdlKHZhbHVlLHByb3RvLnNpbV9zZXJ2ZXIuV29ybGRTdGF0ZVJlc3BvbnNlLmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcik7XG4gICAgICBtc2cuc2V0RW5kU3RhdGUodmFsdWUpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzOlxuICAgICAgdmFyIHZhbHVlID0gLyoqIEB0eXBlIHtib29sZWFufSAqLyAocmVhZGVyLnJlYWRCb29sKCkpO1xuICAgICAgbXNnLnNldFN0YXRlQ2hhbmdlZER1cmluZ1NpbSh2YWx1ZSk7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgcmVhZGVyLnNraXBGaWVsZCgpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiBtc2c7XG59O1xuXG5cbi8qKlxuICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLlxuICogQHJldHVybiB7IVVpbnQ4QXJyYXl9XG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuU2ltdWxhdGlvblJlc3VsdFJlc3BvbnNlLnByb3RvdHlwZS5zZXJpYWxpemVCaW5hcnkgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHdyaXRlciA9IG5ldyBqc3BiLkJpbmFyeVdyaXRlcigpO1xuICBwcm90by5zaW1fc2VydmVyLlNpbXVsYXRpb25SZXN1bHRSZXNwb25zZS5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcih0aGlzLCB3cml0ZXIpO1xuICByZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO1xufTtcblxuXG4vKipcbiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmVcbiAqIGZvcm1hdCksIHdyaXRpbmcgdG8gdGhlIGdpdmVuIEJpbmFyeVdyaXRlci5cbiAqIEBwYXJhbSB7IXByb3RvLnNpbV9zZXJ2ZXIuU2ltdWxhdGlvblJlc3VsdFJlc3BvbnNlfSBtZXNzYWdlXG4gKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyXG4gKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzXG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuU2ltdWxhdGlvblJlc3VsdFJlc3BvbnNlLnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyID0gZnVuY3Rpb24obWVzc2FnZSwgd3JpdGVyKSB7XG4gIHZhciBmID0gdW5kZWZpbmVkO1xuICBmID0gbWVzc2FnZS5nZXRTdGFydFN0YXRlKCk7XG4gIGlmIChmICE9IG51bGwpIHtcbiAgICB3cml0ZXIud3JpdGVNZXNzYWdlKFxuICAgICAgMSxcbiAgICAgIGYsXG4gICAgICBwcm90by5zaW1fc2VydmVyLldvcmxkU3RhdGVSZXNwb25zZS5zZXJpYWxpemVCaW5hcnlUb1dyaXRlclxuICAgICk7XG4gIH1cbiAgZiA9IG1lc3NhZ2UuZ2V0RW5kU3RhdGUoKTtcbiAgaWYgKGYgIT0gbnVsbCkge1xuICAgIHdyaXRlci53cml0ZU1lc3NhZ2UoXG4gICAgICAyLFxuICAgICAgZixcbiAgICAgIHByb3RvLnNpbV9zZXJ2ZXIuV29ybGRTdGF0ZVJlc3BvbnNlLnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyXG4gICAgKTtcbiAgfVxuICBmID0gbWVzc2FnZS5nZXRTdGF0ZUNoYW5nZWREdXJpbmdTaW0oKTtcbiAgaWYgKGYpIHtcbiAgICB3cml0ZXIud3JpdGVCb29sKFxuICAgICAgMyxcbiAgICAgIGZcbiAgICApO1xuICB9XG59O1xuXG5cbi8qKlxuICogb3B0aW9uYWwgV29ybGRTdGF0ZVJlc3BvbnNlIHN0YXJ0X3N0YXRlID0gMTtcbiAqIEByZXR1cm4gez9wcm90by5zaW1fc2VydmVyLldvcmxkU3RhdGVSZXNwb25zZX1cbiAqL1xucHJvdG8uc2ltX3NlcnZlci5TaW11bGF0aW9uUmVzdWx0UmVzcG9uc2UucHJvdG90eXBlLmdldFN0YXJ0U3RhdGUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIC8qKiBAdHlwZXs/cHJvdG8uc2ltX3NlcnZlci5Xb3JsZFN0YXRlUmVzcG9uc2V9ICovIChcbiAgICBqc3BiLk1lc3NhZ2UuZ2V0V3JhcHBlckZpZWxkKHRoaXMsIHByb3RvLnNpbV9zZXJ2ZXIuV29ybGRTdGF0ZVJlc3BvbnNlLCAxKSk7XG59O1xuXG5cbi8qKlxuICogQHBhcmFtIHs/cHJvdG8uc2ltX3NlcnZlci5Xb3JsZFN0YXRlUmVzcG9uc2V8dW5kZWZpbmVkfSB2YWx1ZVxuICogQHJldHVybiB7IXByb3RvLnNpbV9zZXJ2ZXIuU2ltdWxhdGlvblJlc3VsdFJlc3BvbnNlfSByZXR1cm5zIHRoaXNcbiovXG5wcm90by5zaW1fc2VydmVyLlNpbXVsYXRpb25SZXN1bHRSZXNwb25zZS5wcm90b3R5cGUuc2V0U3RhcnRTdGF0ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0V3JhcHBlckZpZWxkKHRoaXMsIDEsIHZhbHVlKTtcbn07XG5cblxuLyoqXG4gKiBDbGVhcnMgdGhlIG1lc3NhZ2UgZmllbGQgbWFraW5nIGl0IHVuZGVmaW5lZC5cbiAqIEByZXR1cm4geyFwcm90by5zaW1fc2VydmVyLlNpbXVsYXRpb25SZXN1bHRSZXNwb25zZX0gcmV0dXJucyB0aGlzXG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuU2ltdWxhdGlvblJlc3VsdFJlc3BvbnNlLnByb3RvdHlwZS5jbGVhclN0YXJ0U3RhdGUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuc2V0U3RhcnRTdGF0ZSh1bmRlZmluZWQpO1xufTtcblxuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciB0aGlzIGZpZWxkIGlzIHNldC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuU2ltdWxhdGlvblJlc3VsdFJlc3BvbnNlLnByb3RvdHlwZS5oYXNTdGFydFN0YXRlID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGQodGhpcywgMSkgIT0gbnVsbDtcbn07XG5cblxuLyoqXG4gKiBvcHRpb25hbCBXb3JsZFN0YXRlUmVzcG9uc2UgZW5kX3N0YXRlID0gMjtcbiAqIEByZXR1cm4gez9wcm90by5zaW1fc2VydmVyLldvcmxkU3RhdGVSZXNwb25zZX1cbiAqL1xucHJvdG8uc2ltX3NlcnZlci5TaW11bGF0aW9uUmVzdWx0UmVzcG9uc2UucHJvdG90eXBlLmdldEVuZFN0YXRlID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiAvKiogQHR5cGV7P3Byb3RvLnNpbV9zZXJ2ZXIuV29ybGRTdGF0ZVJlc3BvbnNlfSAqLyAoXG4gICAganNwYi5NZXNzYWdlLmdldFdyYXBwZXJGaWVsZCh0aGlzLCBwcm90by5zaW1fc2VydmVyLldvcmxkU3RhdGVSZXNwb25zZSwgMikpO1xufTtcblxuXG4vKipcbiAqIEBwYXJhbSB7P3Byb3RvLnNpbV9zZXJ2ZXIuV29ybGRTdGF0ZVJlc3BvbnNlfHVuZGVmaW5lZH0gdmFsdWVcbiAqIEByZXR1cm4geyFwcm90by5zaW1fc2VydmVyLlNpbXVsYXRpb25SZXN1bHRSZXNwb25zZX0gcmV0dXJucyB0aGlzXG4qL1xucHJvdG8uc2ltX3NlcnZlci5TaW11bGF0aW9uUmVzdWx0UmVzcG9uc2UucHJvdG90eXBlLnNldEVuZFN0YXRlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRXcmFwcGVyRmllbGQodGhpcywgMiwgdmFsdWUpO1xufTtcblxuXG4vKipcbiAqIENsZWFycyB0aGUgbWVzc2FnZSBmaWVsZCBtYWtpbmcgaXQgdW5kZWZpbmVkLlxuICogQHJldHVybiB7IXByb3RvLnNpbV9zZXJ2ZXIuU2ltdWxhdGlvblJlc3VsdFJlc3BvbnNlfSByZXR1cm5zIHRoaXNcbiAqL1xucHJvdG8uc2ltX3NlcnZlci5TaW11bGF0aW9uUmVzdWx0UmVzcG9uc2UucHJvdG90eXBlLmNsZWFyRW5kU3RhdGUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuc2V0RW5kU3RhdGUodW5kZWZpbmVkKTtcbn07XG5cblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhpcyBmaWVsZCBpcyBzZXQuXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5wcm90by5zaW1fc2VydmVyLlNpbXVsYXRpb25SZXN1bHRSZXNwb25zZS5wcm90b3R5cGUuaGFzRW5kU3RhdGUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZCh0aGlzLCAyKSAhPSBudWxsO1xufTtcblxuXG4vKipcbiAqIG9wdGlvbmFsIGJvb2wgc3RhdGVfY2hhbmdlZF9kdXJpbmdfc2ltID0gMztcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuU2ltdWxhdGlvblJlc3VsdFJlc3BvbnNlLnByb3RvdHlwZS5nZXRTdGF0ZUNoYW5nZWREdXJpbmdTaW0gPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi8gKGpzcGIuTWVzc2FnZS5nZXRCb29sZWFuRmllbGRXaXRoRGVmYXVsdCh0aGlzLCAzLCBmYWxzZSkpO1xufTtcblxuXG4vKipcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsdWVcbiAqIEByZXR1cm4geyFwcm90by5zaW1fc2VydmVyLlNpbXVsYXRpb25SZXN1bHRSZXNwb25zZX0gcmV0dXJucyB0aGlzXG4gKi9cbnByb3RvLnNpbV9zZXJ2ZXIuU2ltdWxhdGlvblJlc3VsdFJlc3BvbnNlLnByb3RvdHlwZS5zZXRTdGF0ZUNoYW5nZWREdXJpbmdTaW0gPSBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0Jvb2xlYW5GaWVsZCh0aGlzLCAzLCB2YWx1ZSk7XG59O1xuXG5cbmdvb2cub2JqZWN0LmV4dGVuZChleHBvcnRzLCBwcm90by5zaW1fc2VydmVyKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImdvb2dsZS1wcm90b2J1ZlwiKTs7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiZ3JwYy13ZWJcIik7OyIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJpbXBvcnQgKiBhcyBncnBjV2ViIGZyb20gJ2dycGMtd2ViJztcbmltcG9ydCB7IFN0YXRlU2VydmljZUNsaWVudCB9IGZyb20gJy4vcHJvdG8vZ2VuZXJhdGVkL1NpbV9zZXJ2ZXJTZXJ2aWNlQ2xpZW50UGInO1xuaW1wb3J0IHsgU3RhcnRTaW11bGF0aW9uUmVxdWVzdCwgU2ltdWxhdGlvblJlc3VsdFJlc3BvbnNlLCBJbml0aWFsaXplUmVxdWVzdCwgR3JpZERpbWVuc2lvbnMsIFN0ZXBSZXF1ZXN0IH0gZnJvbSAnLi9wcm90by9nZW5lcmF0ZWQvc2ltX3NlcnZlcl9wYic7XG5cbmNvbnN0IHN0YXRlU2VydmljZSA9IG5ldyBTdGF0ZVNlcnZpY2VDbGllbnQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwNTEnLCBudWxsLCBudWxsKTtcblxuY29uc3QgcmVxdWVzdCA9IG5ldyBTdGFydFNpbXVsYXRpb25SZXF1ZXN0KCk7XG5cbmNvbnN0IGluaXRSZXEgPSBuZXcgSW5pdGlhbGl6ZVJlcXVlc3QoKTtcbmNvbnN0IGRpbXMgPSBuZXcgR3JpZERpbWVuc2lvbnMoKVxuZGltcy5zZXRYTWF4KDEwKTtcbmRpbXMuc2V0WU1heCgxMCk7XG5kaW1zLnNldFpNYXgoMTApO1xuaW5pdFJlcS5zZXREaW1lbnNpb25zKGRpbXMpO1xuXG5jb25zdCBzdGVwUmVxID0gbmV3IFN0ZXBSZXF1ZXN0KCk7XG5zdGVwUmVxLnNldE51bVN0ZXBzKDEwMDApO1xuc3RlcFJlcS5zZXRSdWxlKFwiQVNORlo0bXJ6ZThCSTBWbmlhdk43dz09XCIpO1xuXG5yZXF1ZXN0LnNldFRpbWVvdXQoNSk7XG5yZXF1ZXN0LnNldEluaXRSZXEoaW5pdFJlcSk7XG5yZXF1ZXN0LnNldFN0ZXBSZXEoc3RlcFJlcSk7XG5cbnN0YXRlU2VydmljZS5zdGFydFNpbXVsYXRpb24ocmVxdWVzdClcbiAgLnRoZW4oKHJlc3BvbnNlOiBTaW11bGF0aW9uUmVzdWx0UmVzcG9uc2UpID0+IHtcbiAgICBjb25zb2xlLmxvZyhgUmVjZWl2ZWQgcmVzcG9uc2U6ICR7cmVzcG9uc2UuZ2V0U3RhdGVDaGFuZ2VkRHVyaW5nU2ltKCl9YCk7XG4gIH0pLmNhdGNoKChlcnI6IGdycGNXZWIuUnBjRXJyb3IpID0+IHtcbiAgICBjb25zb2xlLmxvZyhgUmVjZWl2ZWQgZXJyb3I6ICR7ZXJyLmNvZGV9LCAke2Vyci5tZXNzYWdlfWApO1xuICB9KTsiXSwic291cmNlUm9vdCI6IiJ9